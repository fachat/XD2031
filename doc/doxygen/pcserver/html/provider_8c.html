<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XD2031 pcserver: provider.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XD2031 pcserver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">provider.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="provider_8h_source.html">provider.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="errors_8h_source.html">errors.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for provider.c:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c__incl.png" border="0" usemap="#provider_8c" alt=""/></div>
<map name="provider_8c" id="provider_8c">
<area shape="rect" id="node7" href="log_8h.html" title="log.h" alt="" coords="178,83,227,111"/><area shape="rect" id="node9" href="provider_8h.html" title="provider.h" alt="" coords="252,83,331,111"/><area shape="rect" id="node11" href="errors_8h.html" title="errors.h" alt="" coords="356,83,423,111"/></map>
</div>
</div>
<p><a href="provider_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad9a7ae74bd508938f66505cd74bc1cca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca">provider_register</a> (<a class="el" href="structprovider__t.html">provider_t</a> *<a class="el" href="provider_8c.html#a9cfb091f3898a26be41690ceec533d6d">provider</a>)</td></tr>
<tr class="separator:ad9a7ae74bd508938f66505cd74bc1cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09b19b96a84715ca81a06f743e3570d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d">provider_assign</a> (int drive, const char *name)</td></tr>
<tr class="separator:ac09b19b96a84715ca81a06f743e3570d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace7b8936edf7a06cda75602ded054086"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#ace7b8936edf7a06cda75602ded054086">provider_init</a> ()</td></tr>
<tr class="separator:ace7b8936edf7a06cda75602ded054086"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a928f4f1facce651a1e3a060e88e09a63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a> (int drive)</td></tr>
<tr class="separator:a928f4f1facce651a1e3a060e88e09a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a72e4992cbe72ae59315192b31485b171"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#a72e4992cbe72ae59315192b31485b171">http_provider</a></td></tr>
<tr class="separator:a72e4992cbe72ae59315192b31485b171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14d708842cc58180467908fae5b43c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#af14d708842cc58180467908fae5b43c9">ftp_provider</a></td></tr>
<tr class="separator:af14d708842cc58180467908fae5b43c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f72e6ba830df5e9515c68ba37e065dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#a2f72e6ba830df5e9515c68ba37e065dc">fs_provider</a></td></tr>
<tr class="separator:a2f72e6ba830df5e9515c68ba37e065dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b98a0ed26d1b14726455a21a63cd9a"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a9cfb091f3898a26be41690ceec533d6d"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="structprovider__t.html">provider_t</a> *&#160;&#160;&#160;<a class="el" href="provider_8c.html#a9cfb091f3898a26be41690ceec533d6d">provider</a></td></tr>
<tr class="separator:a9cfb091f3898a26be41690ceec533d6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73b98a0ed26d1b14726455a21a63cd9a"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a> [<a class="el" href="provider_8h.html#a46384ba4021035cc8ee67a0fa97e45cf">MAX_NUMBER_OF_PROVIDERS</a>]</td></tr>
<tr class="separator:a73b98a0ed26d1b14726455a21a63cd9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d3d62ec6678c1afa09d5809acec5d1"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a9134d52fd335f5214609d042374fa710"><td class="memItemLeft" >&#160;&#160;&#160;int&#160;&#160;&#160;<a class="el" href="provider_8c.html#a9134d52fd335f5214609d042374fa710">epno</a></td></tr>
<tr class="separator:a9134d52fd335f5214609d042374fa710"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad001a35bcc827d3a580c8b5420f0d130"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;&#160;&#160;<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a></td></tr>
<tr class="separator:ad001a35bcc827d3a580c8b5420f0d130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d3d62ec6678c1afa09d5809acec5d1"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a> [<a class="el" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>]</td></tr>
<tr class="separator:ac9d3d62ec6678c1afa09d5809acec5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac09b19b96a84715ca81a06f743e3570d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int provider_assign </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>drive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>drive is the endpoint number to assign the new provider to. name denotes the actual provider for the given drive/endpoint </p>

<p>Definition at line <a class="el" href="provider_8c_source.html#l00070">70</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>References <a class="el" href="provider_8c_source.html#l00050">ep</a>, <a class="el" href="provider_8c_source.html#l00049">epno</a>, <a class="el" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>, <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="errors_8h_source.html#l00038">ERROR_OK</a>, <a class="el" href="provider_8h_source.html#l00052">provider_t::freeep</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="log_8c_source.html#l00087">log_info()</a>, <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>, <a class="el" href="provider_8h_source.html#l00044">MAX_NUMBER_OF_PROVIDERS</a>, <a class="el" href="provider_8h_source.html#l00049">provider_t::name</a>, <a class="el" href="provider_8h_source.html#l00051">provider_t::newep</a>, <a class="el" href="provider_8c_source.html#l00045">provider</a>, <a class="el" href="provider_8c_source.html#l00183">provider_lookup()</a>, <a class="el" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>, and <a class="el" href="provider_8h_source.html#l00073">_endpoint::ptype</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00125">cmd_assign_from_cmdline()</a>, and <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd">log_info</a>(<span class="stringliteral">&quot;assign &#39;%s&#39; to drive %d\n&quot;</span>, name, drive);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// find end of name</span></div>
<div class="line">    <span class="keywordtype">int</span> p = 0;</div>
<div class="line">    <span class="keywordflow">while</span> (name[p] != 0 &amp;&amp; name[p] != <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line">        p++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="struct__endpoint.html">endpoint_t</a> *parent = NULL;</div>
<div class="line">    <a class="code" href="structprovider__t.html">provider_t</a> *<a class="code" href="provider_8c.html#a9cfb091f3898a26be41690ceec533d6d">provider</a> = NULL;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// check if it is a drive</span></div>
<div class="line">    <span class="keywordflow">if</span> ((isdigit(name[0])) &amp;&amp; (p == 1)) {</div>
<div class="line">        <span class="comment">// we have a drive number</span></div>
<div class="line">        <span class="keywordtype">int</span> drv = name[0] &amp; 0x0f;</div>
<div class="line">        parent = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(drv);</div>
<div class="line">        <span class="keywordflow">if</span> (parent != NULL) {</div>
<div class="line">            provider = parent-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;Got drive number: %d, with provider %p\n&quot;</span>, drv, provider);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;Provider=%p\n&quot;</span>, provider);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (provider == NULL) {</div>
<div class="line">        <span class="comment">// check each of the providers in turn</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = <a class="code" href="provider_8h.html#a46384ba4021035cc8ee67a0fa97e45cf">MAX_NUMBER_OF_PROVIDERS</a>-1; i &gt;= 0; i--) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider != NULL) {</div>
<div class="line">                <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;Compare to provider %s\n&quot;</span>, <a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider-&gt;<a class="code" href="structprovider__t.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">                <span class="keyword">const</span> <span class="keywordtype">char</span> *pname = <a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider-&gt;name;</div>
<div class="line">                <span class="keywordtype">int</span> j = 0;</div>
<div class="line">                <span class="keywordflow">for</span> (j = 0; j &lt; p; j++) {</div>
<div class="line">                    <span class="keywordflow">if</span> (name[j] != pname[j]) {</div>
<div class="line">                        <span class="comment">// provider and assign name do not match</span></div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> ((j == p) &amp;&amp; (pname[p] == 0)) {</div>
<div class="line">                    <span class="comment">// got one</span></div>
<div class="line">                    provider = <a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider;</div>
<div class="line">                    <a class="code" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd">log_info</a>(<span class="stringliteral">&quot;Found provider named &#39;%s&#39;\n&quot;</span>, provider-&gt;<a class="code" href="structprovider__t.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="struct__endpoint.html">endpoint_t</a> *newep = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (provider != NULL) {</div>
<div class="line">        <span class="comment">// get new endpoint</span></div>
<div class="line">        newep = provider-&gt;<a class="code" href="structprovider__t.html#ab01791cf8be9fb48ec86bfa18eac2bf7">newep</a>(parent, (name[p] == 0) ? name + p : name + p + 1);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (newep != NULL) {</div>
<div class="line">        <span class="comment">// check if the drive is already in use and free it if necessary</span></div>
<div class="line">         <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].<a class="code" href="provider_8c.html#a9134d52fd335f5214609d042374fa710">epno</a> == drive) {</div>
<div class="line">                <a class="code" href="structprovider__t.html">provider_t</a> *prevprov = <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].ep-&gt;ptype;</div>
<div class="line">                prevprov-&gt;<a class="code" href="structprovider__t.html#aa1745401d09c4f32c3225fc3c0a92e65">freeep</a>(<a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].<a class="code" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>);</div>
<div class="line">                            <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].ep = NULL;</div>
<div class="line">                <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].epno = -1;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// register new endpoint</span></div>
<div class="line">            <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">                    <span class="keywordflow">if</span> (<a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].<a class="code" href="provider_8c.html#a9134d52fd335f5214609d042374fa710">epno</a> == -1) {</div>
<div class="line">                <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].ep = newep;</div>
<div class="line">                <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].epno = drive;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">            }</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ac09b19b96a84715ca81a06f743e3570d_cgraph.png" border="0" usemap="#provider_8c_ac09b19b96a84715ca81a06f743e3570d_cgraph" alt=""/></div>
<map name="provider_8c_ac09b19b96a84715ca81a06f743e3570d_cgraph" id="provider_8c_ac09b19b96a84715ca81a06f743e3570d_cgraph">
<area shape="rect" id="node3" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="188,5,271,33"/><area shape="rect" id="node5" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="195,57,263,85"/><area shape="rect" id="node7" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63" title="provider_lookup" alt="" coords="171,109,287,137"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ac09b19b96a84715ca81a06f743e3570d_icgraph.png" border="0" usemap="#provider_8c_ac09b19b96a84715ca81a06f743e3570d_icgraph" alt=""/></div>
<map name="provider_8c_ac09b19b96a84715ca81a06f743e3570d_icgraph" id="provider_8c_ac09b19b96a84715ca81a06f743e3570d_icgraph">
<area shape="rect" id="node3" href="fscmd_8h.html#a05c10a83750f826bd67a461d2ea0e2ec" title="cmd_assign_from_cmdline" alt="" coords="171,5,351,33"/><area shape="rect" id="node7" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="227,57,296,85"/><area shape="rect" id="node5" href="fsser_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="415,5,465,33"/><area shape="rect" id="node9" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="400,57,480,85"/><area shape="rect" id="node11" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="528,57,578,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace7b8936edf7a06cda75602ded054086"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void provider_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00152">152</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>References <a class="el" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>, <a class="el" href="provider_8h_source.html#l00050">provider_t::init</a>, <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>, and <a class="el" href="provider_8c_source.html#l00054">provider_register()</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00116">cmd_init()</a>.</p>
<div class="fragment"><div class="line">                     {</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">          <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].epno = -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// manually handle the initial provider</span></div>
<div class="line">        <a class="code" href="fs__provider_8c.html#a2f72e6ba830df5e9515c68ba37e065dc">fs_provider</a>.<a class="code" href="structprovider__t.html#aa60f25561bf45254be017b56fcece4c7">init</a>();</div>
<div class="line">    <a class="code" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca">provider_register</a>(&amp;<a class="code" href="fs__provider_8c.html#a2f72e6ba830df5e9515c68ba37e065dc">fs_provider</a>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="curl__provider_8c.html#af14d708842cc58180467908fae5b43c9">ftp_provider</a>.<a class="code" href="structprovider__t.html#aa60f25561bf45254be017b56fcece4c7">init</a>();</div>
<div class="line">    <a class="code" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca">provider_register</a>(&amp;<a class="code" href="curl__provider_8c.html#af14d708842cc58180467908fae5b43c9">ftp_provider</a>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="curl__provider_8c.html#a72e4992cbe72ae59315192b31485b171">http_provider</a>.<a class="code" href="structprovider__t.html#aa60f25561bf45254be017b56fcece4c7">init</a>();</div>
<div class="line">    <a class="code" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca">provider_register</a>(&amp;<a class="code" href="curl__provider_8c.html#a72e4992cbe72ae59315192b31485b171">http_provider</a>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">//eptable[0].epno = 0;            // drive 0</span></div>
<div class="line">        <span class="comment">//eptable[0].ep = fs_provider.newep(NULL, &quot;.&quot;);</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">//eptable[1].epno = 9;      // drive 9</span></div>
<div class="line">    <span class="comment">//eptable[1].ep = fs_provider.newep(NULL, &quot;../tools&quot;);</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// test</span></div>
<div class="line">        <span class="comment">//eptable[4].epno = 6;            // drive 6</span></div>
<div class="line">        <span class="comment">//eptable[4].ep = fs_provider.newep(NULL, &quot;..&quot;);</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// test</span></div>
<div class="line">        <span class="comment">//eptable[6].epno = 7;            // drive 7</span></div>
<div class="line">        <span class="comment">//eptable[6].ep = ftp_provider.newep(NULL, &quot;zimmers.net/pub/cbm&quot;);</span></div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ace7b8936edf7a06cda75602ded054086_cgraph.png" border="0" usemap="#provider_8c_ace7b8936edf7a06cda75602ded054086_cgraph" alt=""/></div>
<map name="provider_8c_ace7b8936edf7a06cda75602ded054086_cgraph" id="provider_8c_ace7b8936edf7a06cda75602ded054086_cgraph">
<area shape="rect" id="node3" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca" title="provider_register" alt="" coords="147,5,269,33"/><area shape="rect" id="node5" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="317,5,392,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ace7b8936edf7a06cda75602ded054086_icgraph.png" border="0" usemap="#provider_8c_ace7b8936edf7a06cda75602ded054086_icgraph" alt=""/></div>
<map name="provider_8c_ace7b8936edf7a06cda75602ded054086_icgraph" id="provider_8c_ace7b8936edf7a06cda75602ded054086_icgraph">
<area shape="rect" id="node3" href="fscmd_8h.html#ab39e508f0407f0116610fe76bad3b699" title="cmd_init" alt="" coords="147,5,218,33"/><area shape="rect" id="node5" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="267,5,317,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a928f4f1facce651a1e3a060e88e09a63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a>* provider_lookup </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>drive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00183">183</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>References <a class="el" href="provider_8c_source.html#l00049">epno</a>, <a class="el" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>, and <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>, and <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].<a class="code" href="provider_8c.html#a9134d52fd335f5214609d042374fa710">epno</a> == drive) {</div>
<div class="line">                        <span class="keywordflow">return</span> <a class="code" href="provider_8c.html#ac9d3d62ec6678c1afa09d5809acec5d1">eptable</a>[i].ep;</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_a928f4f1facce651a1e3a060e88e09a63_icgraph.png" border="0" usemap="#provider_8c_a928f4f1facce651a1e3a060e88e09a63_icgraph" alt=""/></div>
<map name="provider_8c_a928f4f1facce651a1e3a060e88e09a63_icgraph" id="provider_8c_a928f4f1facce651a1e3a060e88e09a63_icgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="392,5,461,33"/><area shape="rect" id="node9" href="provider_8h.html#ac09b19b96a84715ca81a06f743e3570d" title="provider_assign" alt="" coords="172,57,287,85"/><area shape="rect" id="node5" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="566,5,645,33"/><area shape="rect" id="node7" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="694,5,744,33"/><area shape="rect" id="node11" href="fscmd_8h.html#a05c10a83750f826bd67a461d2ea0e2ec" title="cmd_assign_from_cmdline" alt="" coords="337,57,517,85"/><area shape="rect" id="node13" href="fsser_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="580,57,630,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad9a7ae74bd508938f66505cd74bc1cca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int provider_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structprovider__t.html">provider_t</a> *&#160;</td>
          <td class="paramname"><em>provider</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00054">54</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>, <a class="el" href="provider_8h_source.html#l00049">provider_t::name</a>, <a class="el" href="provider_8c_source.html#l00045">provider</a>, and <a class="el" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>.</p>

<p>Referenced by <a class="el" href="provider_8c_source.html#l00152">provider_init()</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider == NULL) {</div>
<div class="line">            <a class="code" href="provider_8c.html#a73b98a0ed26d1b14726455a21a63cd9a">providers</a>[i].provider = <a class="code" href="provider_8c.html#a9cfb091f3898a26be41690ceec533d6d">provider</a>;</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        }</div>
<div class="line">    <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;No space left in provider table for provider %s\n&quot;</span>, provider-&gt;<a class="code" href="structprovider__t.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">    <span class="keywordflow">return</span> -22;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_cgraph.png" border="0" usemap="#provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_cgraph" alt=""/></div>
<map name="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_cgraph" id="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="176,5,251,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_icgraph.png" border="0" usemap="#provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_icgraph" alt=""/></div>
<map name="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_icgraph" id="provider_8c_ad9a7ae74bd508938f66505cd74bc1cca_icgraph">
<area shape="rect" id="node3" href="provider_8h.html#ab28e292d9ece77f1b5cd150bdff218e0" title="provider_init" alt="" coords="176,5,270,33"/><area shape="rect" id="node5" href="fscmd_8h.html#ab39e508f0407f0116610fe76bad3b699" title="cmd_init" alt="" coords="318,5,389,33"/><area shape="rect" id="node7" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="438,5,488,33"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad001a35bcc827d3a580c8b5420f0d130"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a>* ep</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00050">50</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>Referenced by <a class="el" href="curl__test_8c_source.html#l00065">dir_test()</a>, <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>, <a class="el" href="curl__test_8c_source.html#l00105">get_test()</a>, <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, and <a class="el" href="fscmd_8c_source.html#l00098">set_chan()</a>.</p>

</div>
</div>
<a class="anchor" id="a9134d52fd335f5214609d042374fa710"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int epno</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00049">49</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>Referenced by <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, and <a class="el" href="provider_8c_source.html#l00183">provider_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="ac9d3d62ec6678c1afa09d5809acec5d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   eptable[<a class="el" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, <a class="el" href="provider_8c_source.html#l00152">provider_init()</a>, and <a class="el" href="provider_8c_source.html#l00183">provider_lookup()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f72e6ba830df5e9515c68ba37e065dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> fs_provider</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af14d708842cc58180467908fae5b43c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> ftp_provider</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a72e4992cbe72ae59315192b31485b171"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> http_provider</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9cfb091f3898a26be41690ceec533d6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a>* provider</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="provider_8c_source.html#l00045">45</a> of file <a class="el" href="provider_8c_source.html">provider.c</a>.</p>

<p>Referenced by <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, and <a class="el" href="provider_8c_source.html#l00054">provider_register()</a>.</p>

</div>
</div>
<a class="anchor" id="a73b98a0ed26d1b14726455a21a63cd9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   providers[<a class="el" href="provider_8h.html#a46384ba4021035cc8ee67a0fa97e45cf">MAX_NUMBER_OF_PROVIDERS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, and <a class="el" href="provider_8c_source.html#l00054">provider_register()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 4 2012 04:37:40 for XD2031 pcserver by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
