<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XD2031 pcserver: curl_provider.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XD2031 pcserver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">curl_provider.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;curl/curl.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;strings.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="wireformat_8h_source.html">wireformat.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="provider_8h_source.html">provider.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for curl_provider.c:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c__incl.png" border="0" usemap="#curl__provider_8c" alt=""/></div>
<map name="curl__provider_8c" id="curl__provider_8c">
<area shape="rect" id="node13" href="wireformat_8h.html" title="wireformat.h" alt="" coords="465,83,559,111"/><area shape="rect" id="node17" href="provider_8h.html" title="provider.h" alt="" coords="583,83,661,111"/><area shape="rect" id="node19" href="log_8h.html" title="log.h" alt="" coords="687,83,736,111"/><area shape="rect" id="node15" href="errors_8h.html" title="errors.h" alt="" coords="478,161,545,189"/></map>
</div>
</div>
<p><a href="curl__provider_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_file.html">File</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7076b6a7e31eae9bd868d91105f102a9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a7076b6a7e31eae9bd868d91105f102a9">DEBUG_CURL</a></td></tr>
<tr class="separator:a7076b6a7e31eae9bd868d91105f102a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d796b98c583d49e83adabd74a63bf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:ad4d796b98c583d49e83adabd74a63bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa28385e7d8af8afbffea2f0ea580faf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#aa28385e7d8af8afbffea2f0ea580faf6">MAX_PROTO_SIZE</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:aa28385e7d8af8afbffea2f0ea580faf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3ef68d2292999ee3beb635427a515ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ad3ef68d2292999ee3beb635427a515ef">MAX_SESSIONS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ad3ef68d2292999ee3beb635427a515ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ada7f073b56163c95376dd2bcabff6d8d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_file.html">File</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ada7f073b56163c95376dd2bcabff6d8d">File</a></td></tr>
<tr class="separator:ada7f073b56163c95376dd2bcabff6d8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a366728e00d588373adbfc2d6cf895fb3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3">proto_t</a> { <a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3accc46838d2346c2c0c55602f2effe1dd">PROTO_FTP</a>, 
<a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a0f21e416a5a4ffe936ac4e319edb1dcf">PROTO_FTPS</a>, 
<a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a6d5ad1c7c1c8ff1a19a79368acd7ec77">PROTO_HTTP</a>, 
<a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a80da59f3b1a212934aaaf954a70ff4c6">PROTO_HTTPS</a>
 }</td></tr>
<tr class="separator:a366728e00d588373adbfc2d6cf895fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5c91119276329daa47005a88c09c7010"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a5c91119276329daa47005a88c09c7010">curl_init</a> ()</td></tr>
<tr class="separator:a5c91119276329daa47005a88c09c7010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a39fc856ef71e3d8c7551c20b632272"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272">init_fp</a> (<a class="el" href="struct_file.html">File</a> *fp)</td></tr>
<tr class="separator:a0a39fc856ef71e3d8c7551c20b632272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac57d0b6a21fd5d68f7dcea96a358ea07"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07">new_endpoint</a> (const char *path)</td></tr>
<tr class="separator:ac57d0b6a21fd5d68f7dcea96a358ea07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b78b04a406a467ca8fee1380fe67f8b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b">_new</a> (const char *path)</td></tr>
<tr class="separator:a2b78b04a406a467ca8fee1380fe67f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd513f373f231b1cc581ee0f9c41c299"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#acd513f373f231b1cc581ee0f9c41c299">ftp_new</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *parent, const char *path)</td></tr>
<tr class="separator:acd513f373f231b1cc581ee0f9c41c299"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63378f50c7208fdbb05bc7a337801f9f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a63378f50c7208fdbb05bc7a337801f9f">http_new</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *parent, const char *path)</td></tr>
<tr class="separator:a63378f50c7208fdbb05bc7a337801f9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf5652c677f33cbe6206af837b23e77"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_file.html">File</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a8cf5652c677f33cbe6206af837b23e77">find_file</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int chan)</td></tr>
<tr class="separator:a8cf5652c677f33cbe6206af837b23e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cf2a55043b128deb09fc4adf96d8727"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727">close_fd</a> (<a class="el" href="struct_file.html">File</a> *fp)</td></tr>
<tr class="separator:a2cf2a55043b128deb09fc4adf96d8727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4df323ddb4f39f3fc96c96d7e618ad00"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_file.html">File</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00">reserve_file</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int chan)</td></tr>
<tr class="separator:a4df323ddb4f39f3fc96c96d7e618ad00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371038f10f9b4d15a4ae448c830ec6e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a371038f10f9b4d15a4ae448c830ec6e3">prov_free</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>)</td></tr>
<tr class="separator:a371038f10f9b4d15a4ae448c830ec6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f721d6318d51a3c6579bf0cedf4db89"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89">close_fds</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int tfd)</td></tr>
<tr class="separator:a3f721d6318d51a3c6579bf0cedf4db89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe6bf4f5d85438de59a33df446ac73df"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#abe6bf4f5d85438de59a33df446ac73df">write_cb</a> (char *ptr, size_t size, size_t nmemb, void *user)</td></tr>
<tr class="separator:abe6bf4f5d85438de59a33df446ac73df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b6603bc58ebca606ad8ee5cf2eccdb"><td class="memItemLeft" align="right" valign="top">static CURLMcode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb">pull_data</a> (<a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep, <a class="el" href="struct_file.html">File</a> *fp, int *eof)</td></tr>
<tr class="separator:aa8b6603bc58ebca606ad8ee5cf2eccdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a236759bf38100c5802d27962ec5db"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ae5a236759bf38100c5802d27962ec5db">reply_with_data</a> (<a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep, <a class="el" href="struct_file.html">File</a> *fp, char *retbuf, int len, int *eof)</td></tr>
<tr class="separator:ae5a236759bf38100c5802d27962ec5db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c76deaf818e476e541fbe083cebde07"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07">read_file</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int tfd, char *retbuf, int len, int *eof)</td></tr>
<tr class="separator:a3c76deaf818e476e541fbe083cebde07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbaeed54c34afef056df227e4b2ed0c7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct_file.html">File</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7">open_file</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int tfd, const char *buf, int is_dir)</td></tr>
<tr class="separator:acbaeed54c34afef056df227e4b2ed0c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d16e372721a3166d5208590a2e57ae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae">open_rd</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int tfd, const char *buf)</td></tr>
<tr class="separator:a22d16e372721a3166d5208590a2e57ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea2b7e3b5c317b82cd244472bf7ac76"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#aaea2b7e3b5c317b82cd244472bf7ac76">dir_nlst_read_converter</a> (struct <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep, <a class="el" href="struct_file.html">File</a> *fp, char *retbuf, int len, int *eof)</td></tr>
<tr class="separator:aaea2b7e3b5c317b82cd244472bf7ac76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab252016e36f100e5c288fac6a881654e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e">open_dr</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, int tfd, const char *buf)</td></tr>
<tr class="separator:ab252016e36f100e5c288fac6a881654e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac688150bdcdb56d532dab21fbef4f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a3ac688150bdcdb56d532dab21fbef4f9">do_chdir</a> (<a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>, char *name)</td></tr>
<tr class="separator:a3ac688150bdcdb56d532dab21fbef4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af14d708842cc58180467908fae5b43c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#af14d708842cc58180467908fae5b43c9">ftp_provider</a></td></tr>
<tr class="separator:af14d708842cc58180467908fae5b43c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72e4992cbe72ae59315192b31485b171"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="curl__provider_8c.html#a72e4992cbe72ae59315192b31485b171">http_provider</a></td></tr>
<tr class="separator:a72e4992cbe72ae59315192b31485b171"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a7076b6a7e31eae9bd868d91105f102a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_CURL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00046">46</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad4d796b98c583d49e83adabd74a63bf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BUFFER_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00048">48</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00659">do_chdir()</a>, <a class="el" href="curl__provider_8c_source.html#l00119">new_endpoint()</a>, and <a class="el" href="curl__provider_8c_source.html#l00406">open_file()</a>.</p>

</div>
</div>
<a class="anchor" id="aa28385e7d8af8afbffea2f0ea580faf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_PROTO_SIZE&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00050">50</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad3ef68d2292999ee3beb635427a515ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SESSIONS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00052">52</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00180">find_file()</a>, <a class="el" href="curl__provider_8c_source.html#l00119">new_endpoint()</a>, <a class="el" href="curl__provider_8c_source.html#l00227">prov_free()</a>, and <a class="el" href="curl__provider_8c_source.html#l00208">reserve_file()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ada7f073b56163c95376dd2bcabff6d8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_file.html">File</a>  <a class="el" href="struct_file.html">File</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a366728e00d588373adbfc2d6cf895fb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3">proto_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a366728e00d588373adbfc2d6cf895fb3accc46838d2346c2c0c55602f2effe1dd"></a>PROTO_FTP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a366728e00d588373adbfc2d6cf895fb3a0f21e416a5a4ffe936ac4e319edb1dcf"></a>PROTO_FTPS</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a366728e00d588373adbfc2d6cf895fb3a6d5ad1c7c1c8ff1a19a79368acd7ec77"></a>PROTO_HTTP</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a366728e00d588373adbfc2d6cf895fb3a80da59f3b1a212934aaaf954a70ff4c6"></a>PROTO_HTTPS</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00060">60</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>
<div class="fragment"><div class="line">             {</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3accc46838d2346c2c0c55602f2effe1dd">PROTO_FTP</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a0f21e416a5a4ffe936ac4e319edb1dcf">PROTO_FTPS</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a6d5ad1c7c1c8ff1a19a79368acd7ec77">PROTO_HTTP</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a80da59f3b1a212934aaaf954a70ff4c6">PROTO_HTTPS</a></div>
<div class="line">} <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3">proto_t</a>;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2b78b04a406a467ca8fee1380fe67f8b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a>* _new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00149">149</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00119">new_endpoint()</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00156">ftp_new()</a>, and <a class="el" href="curl__provider_8c_source.html#l00168">http_new()</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *fsep = <a class="code" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07">new_endpoint</a>(path);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> fsep;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_cgraph.png" border="0" usemap="#curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_cgraph" alt=""/></div>
<map name="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_cgraph" id="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07" title="new_endpoint" alt="" coords="106,5,211,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="260,5,316,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_icgraph.png" border="0" usemap="#curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_icgraph" alt=""/></div>
<map name="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_icgraph" id="curl__provider_8c_a2b78b04a406a467ca8fee1380fe67f8b_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#acd513f373f231b1cc581ee0f9c41c299" title="ftp_new" alt="" coords="111,5,179,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a63378f50c7208fdbb05bc7a337801f9f" title="http_new" alt="" coords="108,57,183,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2cf2a55043b128deb09fc4adf96d8727"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void close_fd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_file.html">File</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00192">192</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00075">File::buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00105">init_fp()</a>, <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>, <a class="el" href="curl__provider_8c_source.html#l00081">File::name_buffer</a>, and <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00244">close_fds()</a>, <a class="el" href="curl__provider_8c_source.html#l00227">prov_free()</a>, and <a class="el" href="curl__provider_8c_source.html#l00208">reserve_file()</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> != NULL) {</div>
<div class="line">        curl_multi_remove_handle(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>, fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>);</div>
<div class="line">        curl_easy_cleanup(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>);</div>
<div class="line">        curl_multi_cleanup(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a> != NULL) {</div>
<div class="line">            free(fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a>);</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272">init_fp</a>(fp);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a> != NULL) {</div>
<div class="line">        free(fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a>);</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a> = NULL;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_cgraph.png" border="0" usemap="#curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_cgraph" alt=""/></div>
<map name="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_cgraph" id="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="126,5,183,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_icgraph.png" border="0" usemap="#curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_icgraph" alt=""/></div>
<map name="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_icgraph" id="curl__provider_8c_a2cf2a55043b128deb09fc4adf96d8727_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89" title="close_fds" alt="" coords="132,5,209,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a371038f10f9b4d15a4ae448c830ec6e3" title="prov_free" alt="" coords="132,57,209,85"/><area shape="rect" id="node7" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00" title="reserve_file" alt="" coords="126,109,216,137"/><area shape="rect" id="node9" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7" title="open_file" alt="" coords="265,109,340,137"/><area shape="rect" id="node11" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae" title="open_rd" alt="" coords="390,82,460,110"/><area shape="rect" id="node13" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="390,134,460,162"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3f721d6318d51a3c6579bf0cedf4db89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void close_fds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tfd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00244">244</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00192">close_fd()</a>, <a class="el" href="curl__provider_8c_source.html#l00180">find_file()</a>, <a class="el" href="log_8c_source.html#l00071">log_warn()</a>, and <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = <a class="code" href="curl__provider_8c.html#a8cf5652c677f33cbe6206af837b23e77">find_file</a>(ep, tfd);</div>
<div class="line">    <span class="keywordflow">if</span> (fp != NULL) {</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> == NULL) {</div>
<div class="line">            <a class="code" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71">log_warn</a>(<span class="stringliteral">&quot;curl sesion %d is NULL!&quot;</span>, tfd);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <a class="code" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727">close_fd</a>(fp);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a3f721d6318d51a3c6579bf0cedf4db89_cgraph.png" border="0" usemap="#curl__provider_8c_a3f721d6318d51a3c6579bf0cedf4db89_cgraph" alt=""/></div>
<map name="curl__provider_8c_a3f721d6318d51a3c6579bf0cedf4db89_cgraph" id="curl__provider_8c_a3f721d6318d51a3c6579bf0cedf4db89_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="131,5,202,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a8cf5652c677f33cbe6206af837b23e77" title="find_file" alt="" coords="133,57,200,85"/><area shape="rect" id="node9" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="252,82,327,110"/><area shape="rect" id="node5" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="261,5,318,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5c91119276329daa47005a88c09c7010"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void curl_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00097">97</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>
<div class="fragment"><div class="line">                        {</div>
<div class="line">    <span class="comment">// according to the curl man page, this init can be done multiple times</span></div>
<div class="line">    CURLcode cc = curl_global_init(CURL_GLOBAL_ALL);</div>
<div class="line">    <span class="keywordflow">if</span> (cc != 0) {</div>
<div class="line">        <span class="comment">// error handling!</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaea2b7e3b5c317b82cd244472bf7ac76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dir_nlst_read_converter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>cep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_file.html">File</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>retbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>eof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>converts the list of file names from an FTP NLST command to a wireformat dir entry.</p>
<p>Because of the FS_DIR_* macros used here, the <a class="el" href="wireformat_8h.html">wireformat.h</a> include is required, which I would like to have avoided... </p>

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00496">496</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00075">File::buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>, <a class="el" href="errors_8h_source.html#l00066">ERROR_DIR_ERROR</a>, <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="errors_8h_source.html#l00047">ERROR_FILE_NAME_TOO_LONG</a>, <a class="el" href="wireformat_8h_source.html#l00091">FS_DIR_MOD_FIL</a>, <a class="el" href="wireformat_8h_source.html#l00093">FS_DIR_MOD_FRE</a>, <a class="el" href="wireformat_8h_source.html#l00092">FS_DIR_MOD_NAM</a>, <a class="el" href="wireformat_8h_source.html#l00086">FS_DIR_MODE</a>, <a class="el" href="wireformat_8h_source.html#l00087">FS_DIR_NAME</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="curl__provider_8c_source.html#l00081">File::name_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00290">pull_data()</a>, and <a class="el" href="curl__provider_8c_source.html#l00080">File::read_state</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00602">open_dr()</a>.</p>
<div class="fragment"><div class="line">                                                                                                    {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (len &lt; <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a> + 1) {</div>
<div class="line">        <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;read buffer too small for dir entry (is %d, need at least %d)\n&quot;</span>,</div>
<div class="line">                len, <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>+1);</div>
<div class="line">        <span class="keywordflow">return</span> -<a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// prepare dir entry</span></div>
<div class="line">    memset(retbuf, 0, <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>+1);   </div>
<div class="line">    </div>
<div class="line">    <span class="keywordtype">int</span> l = 0;</div>
<div class="line">    <span class="keywordtype">char</span> *namep = retbuf + <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>;</div>
<div class="line">    <span class="keywordflow">switch</span>(fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>) {</div>
<div class="line">    <span class="keywordflow">case</span> 0:     <span class="comment">// disk name</span></div>
<div class="line">        retbuf[<a class="code" href="wireformat_8h.html#a602d876bb8d21ac23806fec992e3364c">FS_DIR_MODE</a>] = <a class="code" href="wireformat_8h.html#a0d6dc2641ccc888a7aa3b8b8a2877841">FS_DIR_MOD_NAM</a>;</div>
<div class="line">        l = strlen(fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (len &lt; FS_DIR_NAME + l + 1) {</div>
<div class="line">            <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;read buffer too small for dir name (is %d, need at least %d)\n&quot;</span>,</div>
<div class="line">                len, l+FS_DIR_NAME+1);</div>
<div class="line">            <span class="keywordflow">return</span> -<a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aa2f918af85b7b98ec0d8063ae2d4f87d">ERROR_FILE_NAME_TOO_LONG</a>;</div>
<div class="line">        }</div>
<div class="line">        strncpy(retbuf, fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a>, l+1);</div>
<div class="line">        l = l + FS_DIR_NAME + 1;</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>++;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> 1:</div>
<div class="line">        <span class="comment">// file names</span></div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;get filename, bufdatalen=%d, bufrp=%d, eof=%d\n&quot;</span>,</div>
<div class="line">            fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>, fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>, *eof);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        l = <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>;</div>
<div class="line">        retbuf[<a class="code" href="wireformat_8h.html#a602d876bb8d21ac23806fec992e3364c">FS_DIR_MODE</a>] = <a class="code" href="wireformat_8h.html#aaffb46db0287f13c8fe481f2694e48e6">FS_DIR_MOD_FIL</a>;</div>
<div class="line">        <span class="keywordflow">do</span> {</div>
<div class="line">            <span class="keywordflow">while</span> ((fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> &lt;= fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>) &amp;&amp; (*eof == 0)) {</div>
<div class="line"></div>
<div class="line">                <span class="comment">//log_debug(&quot;Trying to pull...\n&quot;);</span></div>
<div class="line"></div>
<div class="line">                CURLMcode rv = <a class="code" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb">pull_data</a>((<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*)cep, fp, eof);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (rv != CURLM_OK) {</div>
<div class="line">                    <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;Error retrieving directory data (%d)\n&quot;</span>, rv);</div>
<div class="line">                    <span class="keywordflow">return</span> -<a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6d01537c2e76635daada8f7ae42f66bf">ERROR_DIR_ERROR</a>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">// find length of name</span></div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">while</span> (fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> &lt; fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>) {</div>
<div class="line">                <span class="keywordtype">char</span> c = fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a>[fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>];</div>
<div class="line">                fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> ++;</div>
<div class="line">                <span class="keywordflow">if</span> (c == 13) {</div>
<div class="line">                    <span class="comment">// ignore</span></div>
<div class="line">                } <span class="keywordflow">else</span></div>
<div class="line">                <span class="keywordflow">if</span> (c != 10) {</div>
<div class="line">                    *namep = c;</div>
<div class="line">                    namep++;</div>
<div class="line">                    l++;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <span class="comment">// end of name</span></div>
<div class="line">                    *namep = 0;</div>
<div class="line">                    l++;</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>                    <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;bufrp=%d, datalen=%d\n&quot;</span>, fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>, fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (len &lt; FS_DIR_NAME + l + 1) {</div>
<div class="line">                    <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;read buffer too small for dir name (is %d, need at least %d)\n&quot;</span>,</div>
<div class="line">                        len, l+FS_DIR_NAME+1);</div>
<div class="line">                    <span class="keywordflow">return</span> -<a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aa2f918af85b7b98ec0d8063ae2d4f87d">ERROR_FILE_NAME_TOO_LONG</a>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (*eof != 0) {</div>
<div class="line">                <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;end of dir read\n&quot;</span>);</div>
<div class="line">                fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>++;</div>
<div class="line">                *namep = 0;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">while</span> (*namep != 0 &amp;&amp; *eof == 0);   <span class="comment">// not null byte, then not done</span></div>
<div class="line">        *eof = 0;</div>
<div class="line">        <span class="keywordflow">if</span> (l &gt; FS_DIR_NAME) {</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// otherwise fall through</span></div>
<div class="line">    <span class="keywordflow">case</span> 2:</div>
<div class="line">        <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;final dir entry\n&quot;</span>);</div>
<div class="line">        retbuf[<a class="code" href="wireformat_8h.html#a602d876bb8d21ac23806fec992e3364c">FS_DIR_MODE</a>] = <a class="code" href="wireformat_8h.html#ae4662b081c94b7b421c436f15f33fad0">FS_DIR_MOD_FRE</a>;</div>
<div class="line">        retbuf[<a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>] = 0;</div>
<div class="line">        l = FS_DIR_NAME + 1;</div>
<div class="line">        *eof = 1;</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>++;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Got some dir data : datalen=%d\n&quot;</span>, l);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="wireformat_8h.html#af594f026264ffac3b48c9cc60c62bb70">FS_DIR_NAME</a>; i++) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;%02x &quot;</span>, retbuf[i]);</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;: %s\n&quot;</span>, retbuf+FS_DIR_NAME);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> l;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_cgraph.png" border="0" usemap="#curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_cgraph" alt=""/></div>
<map name="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_cgraph" id="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_cgraph">
<area shape="rect" id="node3" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="342,5,426,33"/><area shape="rect" id="node5" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="347,69,421,97"/><area shape="rect" id="node7" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb" title="pull_data" alt="" coords="217,30,292,58"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_icgraph.png" border="0" usemap="#curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_icgraph" alt=""/></div>
<map name="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_icgraph" id="curl__provider_8c_aaea2b7e3b5c317b82cd244472bf7ac76_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="217,5,287,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ac688150bdcdb56d532dab21fbef4f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_chdir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00659">659</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="errors_8h_source.html#l00047">ERROR_FILE_NAME_TOO_LONG</a>, <a class="el" href="errors_8h_source.html#l00038">ERROR_OK</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="curl__provider_8c_source.html#l00048">MAX_BUFFER_SIZE</a>, <a class="el" href="provider_8h_source.html#l00049">provider_t::name</a>, and <a class="el" href="curl__provider_8c_source.html#l00092">curl_endpoint_t::path_buffer</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">    <span class="comment">// change into new dir</span></div>
<div class="line">    </div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;CHDIR: Current path is &#39;%s&#39;, name is &#39;%s&#39;\n&quot;</span>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>, name);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// path buffer is a static buffer, so we can check it in-place</span></div>
<div class="line">    <span class="keywordtype">char</span> *curpath = cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> (name[0] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line">        <span class="comment">// absolute path - just copy over old path</span></div>
<div class="line">        strncpy(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>, name, <a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>);</div>
<div class="line">        cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[<a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>-1] = 0;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// pointer in name</span></div>
<div class="line">    <span class="keywordtype">char</span> *p = name;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="keywordtype">int</span> plen = strlen(p);</div>
<div class="line">        <span class="keywordtype">int</span> l = strlen(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>);</div>
<div class="line">        <span class="keywordflow">if</span> ( ((plen &gt; 1) &amp;&amp; p[0] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; p[1] == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line">        &amp;&amp; (plen == 2 || p[2] == <span class="charliteral">&#39;/&#39;</span>)) {</div>
<div class="line">        <span class="comment">// one dir up</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// remove the last path element</span></div>
<div class="line">        <span class="keywordflow">while</span> (l &gt; 0) {</div>
<div class="line">            <span class="keywordflow">if</span> (cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[l] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">            l--;</div>
<div class="line">        }</div>
<div class="line">        cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[l] = 0;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// advance to next path part</span></div>
<div class="line">        plen = (plen &gt; 2) ? 3 : 2;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// append new path part</span></div>
<div class="line">        <span class="comment">// find end of next part</span></div>
<div class="line">        <span class="keywordflow">for</span> (plen = 0; p[plen] != 0; plen++) {</div>
<div class="line">            <span class="keywordflow">if</span> (p[plen] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (plen + l + 1 &gt; <a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>) {</div>
<div class="line">            <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;new path for chdir too long: %d\n&quot;</span>, plen+l+1);</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aa2f918af85b7b98ec0d8063ae2d4f87d">ERROR_FILE_NAME_TOO_LONG</a>;</div>
<div class="line">        }</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>, <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">        strncat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>, p, plen);</div>
<div class="line">        cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[<a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>-1] = 0;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">if</span>(p[plen] == <span class="charliteral">&#39;/&#39;</span>) plen++;</div>
<div class="line">        }</div>
<div class="line">        p = p+plen;</div>
<div class="line">    } <span class="keywordflow">while</span>(*p != 0);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;CHDIR: New path is &#39;%s&#39;\n&quot;</span>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a3ac688150bdcdb56d532dab21fbef4f9_cgraph.png" border="0" usemap="#curl__provider_8c_a3ac688150bdcdb56d532dab21fbef4f9_cgraph" alt=""/></div>
<map name="curl__provider_8c_a3ac688150bdcdb56d532dab21fbef4f9_cgraph" id="curl__provider_8c_a3ac688150bdcdb56d532dab21fbef4f9_cgraph">
<area shape="rect" id="node3" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="126,5,210,33"/><area shape="rect" id="node5" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="131,57,205,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8cf5652c677f33cbe6206af837b23e77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_file.html">File</a>* find_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00180">180</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00070">File::chan</a>, <a class="el" href="curl__provider_8c_source.html#l00093">curl_endpoint_t::files</a>, <a class="el" href="log_8c_source.html#l00071">log_warn()</a>, and <a class="el" href="curl__provider_8c_source.html#l00052">MAX_SESSIONS</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00244">close_fds()</a>, and <a class="el" href="curl__provider_8c_source.html#l00366">read_file()</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="curl__provider_8c.html#ad3ef68d2292999ee3beb635427a515ef">MAX_SESSIONS</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i].<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a> == chan) {</div>
<div class="line">            <span class="keywordflow">return</span> &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71">log_warn</a>(<span class="stringliteral">&quot;Did not find curl session for channel=%d\n&quot;</span>, chan);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_cgraph.png" border="0" usemap="#curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_cgraph" alt=""/></div>
<map name="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_cgraph" id="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="121,5,196,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_icgraph.png" border="0" usemap="#curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_icgraph" alt=""/></div>
<map name="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_icgraph" id="curl__provider_8c_a8cf5652c677f33cbe6206af837b23e77_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89" title="close_fds" alt="" coords="120,5,197,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07" title="read_file" alt="" coords="122,57,195,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acd513f373f231b1cc581ee0f9c41c299"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a>* ftp_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00156">156</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00149">_new()</a>, <a class="el" href="curl__provider_8c_source.html#l00061">PROTO_FTP</a>, <a class="el" href="curl__provider_8c_source.html#l00088">curl_endpoint_t::protocol</a>, and <a class="el" href="curl__provider_8c_source.html#l00086">curl_endpoint_t::ptype</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *fsep = <a class="code" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b">_new</a>(path);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// not sure if this is needed...</span></div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#abf75f283ab0657253cb036d927f7aefd">protocol</a> = <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3accc46838d2346c2c0c55602f2effe1dd">PROTO_FTP</a>;</div>
<div class="line"></div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2b7c52a663a59bbdb7399fbf87004e96">ptype</a> = (<span class="keyword">struct </span><a class="code" href="structprovider__t.html">provider_t</a> *) &amp;<a class="code" href="curl__provider_8c.html#af14d708842cc58180467908fae5b43c9">ftp_provider</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="struct__endpoint.html">endpoint_t</a>*) fsep;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_acd513f373f231b1cc581ee0f9c41c299_cgraph.png" border="0" usemap="#curl__provider_8c_acd513f373f231b1cc581ee0f9c41c299_cgraph" alt=""/></div>
<map name="curl__provider_8c_acd513f373f231b1cc581ee0f9c41c299_cgraph" id="curl__provider_8c_acd513f373f231b1cc581ee0f9c41c299_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b" title="_new" alt="" coords="123,5,176,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07" title="new_endpoint" alt="" coords="224,5,328,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="377,5,434,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a63378f50c7208fdbb05bc7a337801f9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a>* http_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00168">168</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00149">_new()</a>, <a class="el" href="curl__provider_8c_source.html#l00063">PROTO_HTTP</a>, <a class="el" href="curl__provider_8c_source.html#l00088">curl_endpoint_t::protocol</a>, and <a class="el" href="curl__provider_8c_source.html#l00086">curl_endpoint_t::ptype</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *fsep = <a class="code" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b">_new</a>(path);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// not sure if this is needed...</span></div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#abf75f283ab0657253cb036d927f7aefd">protocol</a> = <a class="code" href="curl__provider_8c.html#a366728e00d588373adbfc2d6cf895fb3a6d5ad1c7c1c8ff1a19a79368acd7ec77">PROTO_HTTP</a>;</div>
<div class="line"></div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2b7c52a663a59bbdb7399fbf87004e96">ptype</a> = (<span class="keyword">struct </span><a class="code" href="structprovider__t.html">provider_t</a> *) &amp;<a class="code" href="curl__provider_8c.html#a72e4992cbe72ae59315192b31485b171">http_provider</a>;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="struct__endpoint.html">endpoint_t</a>*) fsep;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a63378f50c7208fdbb05bc7a337801f9f_cgraph.png" border="0" usemap="#curl__provider_8c_a63378f50c7208fdbb05bc7a337801f9f_cgraph" alt=""/></div>
<map name="curl__provider_8c_a63378f50c7208fdbb05bc7a337801f9f_cgraph" id="curl__provider_8c_a63378f50c7208fdbb05bc7a337801f9f_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b" title="_new" alt="" coords="131,5,184,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07" title="new_endpoint" alt="" coords="232,5,336,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="385,5,442,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0a39fc856ef71e3d8c7551c20b632272"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_fp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_file.html">File</a> *&#160;</td>
          <td class="paramname"><em>fp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00105">105</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00075">File::buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00076">File::buflen</a>, <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>, <a class="el" href="curl__provider_8c_source.html#l00070">File::chan</a>, <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>, <a class="el" href="curl__provider_8c_source.html#l00081">File::name_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00073">File::read_converter</a>, <a class="el" href="curl__provider_8c_source.html#l00080">File::read_state</a>, and <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00192">close_fd()</a>, <a class="el" href="curl__provider_8c_source.html#l00119">new_endpoint()</a>, and <a class="el" href="curl__provider_8c_source.html#l00208">reserve_file()</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a> = -1;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> = NULL;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a> = NULL;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a> = NULL;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a20cc6ed09a3d84d74f09f49179a2ccc8">buflen</a> = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a0e7d09393570ce6c7d8018fddacba3d7">read_converter</a> = NULL;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a> = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a> = NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a0a39fc856ef71e3d8c7551c20b632272_icgraph.png" border="0" usemap="#curl__provider_8c_a0a39fc856ef71e3d8c7551c20b632272_icgraph" alt=""/></div>
<map name="curl__provider_8c_a0a39fc856ef71e3d8c7551c20b632272_icgraph" id="curl__provider_8c_a0a39fc856ef71e3d8c7551c20b632272_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="129,57,199,85"/><area shape="rect" id="node9" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00" title="reserve_file" alt="" coords="264,109,354,137"/><area shape="rect" id="node17" href="curl__provider_8c.html#ac57d0b6a21fd5d68f7dcea96a358ea07" title="new_endpoint" alt="" coords="112,161,216,189"/><area shape="rect" id="node5" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89" title="close_fds" alt="" coords="271,5,348,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a371038f10f9b4d15a4ae448c830ec6e3" title="prov_free" alt="" coords="271,57,348,85"/><area shape="rect" id="node11" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7" title="open_file" alt="" coords="404,109,479,137"/><area shape="rect" id="node13" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae" title="open_rd" alt="" coords="529,82,599,110"/><area shape="rect" id="node15" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="529,134,599,162"/><area shape="rect" id="node19" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b" title="_new" alt="" coords="283,161,336,189"/><area shape="rect" id="node21" href="curl__provider_8c.html#acd513f373f231b1cc581ee0f9c41c299" title="ftp_new" alt="" coords="407,161,475,189"/><area shape="rect" id="node23" href="curl__provider_8c.html#a63378f50c7208fdbb05bc7a337801f9f" title="http_new" alt="" coords="404,213,479,241"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac57d0b6a21fd5d68f7dcea96a358ea07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a>* new_endpoint </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00119">119</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00089">curl_endpoint_t::error_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00093">curl_endpoint_t::files</a>, <a class="el" href="curl__provider_8c_source.html#l00091">curl_endpoint_t::host_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00105">init_fp()</a>, <a class="el" href="curl__provider_8c_source.html#l00048">MAX_BUFFER_SIZE</a>, <a class="el" href="curl__provider_8c_source.html#l00052">MAX_SESSIONS</a>, <a class="el" href="curl__provider_8c_source.html#l00090">curl_endpoint_t::name_buffer</a>, and <a class="el" href="curl__provider_8c_source.html#l00092">curl_endpoint_t::path_buffer</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00149">_new()</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *fsep = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="curl__provider_8c.html#ad3ef68d2292999ee3beb635427a515ef">MAX_SESSIONS</a>; i++) {</div>
<div class="line">        <a class="code" href="struct_file.html">File</a> *fp = &amp;(fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]);</div>
<div class="line">        <a class="code" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272">init_fp</a>(fp);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#abbba3c62ae669fc89ed76d53ee4886a4">error_buffer</a>[0] = 0;</div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>[0] = 0;</div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[0] = 0;</div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#ace4463d24183841559a97e3e75a9ae03">host_buffer</a>[0] = 0;</div>
<div class="line">    <span class="comment">// separate host from path</span></div>
<div class="line">    <span class="comment">// if hostend is NULL, then we only have the host</span></div>
<div class="line">    <span class="keywordtype">char</span> *hostend=index(path, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> hostlen = strlen(path);</div>
<div class="line">    <span class="keywordflow">if</span> (hostend != NULL) {</div>
<div class="line">        hostlen = hostend - path;</div>
<div class="line">    }</div>
<div class="line">    strncpy(fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#ace4463d24183841559a97e3e75a9ae03">host_buffer</a>, path, hostlen);</div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#ace4463d24183841559a97e3e75a9ae03">host_buffer</a>[hostlen] = 0;</div>
<div class="line"></div>
<div class="line">    strncpy(fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>, path+hostlen+1, <a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>);</div>
<div class="line">    fsep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>[<a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>-1] = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> fsep;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_cgraph.png" border="0" usemap="#curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_cgraph" alt=""/></div>
<map name="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_cgraph" id="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="158,5,215,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_icgraph.png" border="0" usemap="#curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_icgraph" alt=""/></div>
<map name="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_icgraph" id="curl__provider_8c_ac57d0b6a21fd5d68f7dcea96a358ea07_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2b78b04a406a467ca8fee1380fe67f8b" title="_new" alt="" coords="157,31,211,59"/><area shape="rect" id="node5" href="curl__provider_8c.html#acd513f373f231b1cc581ee0f9c41c299" title="ftp_new" alt="" coords="263,5,331,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a63378f50c7208fdbb05bc7a337801f9f" title="http_new" alt="" coords="260,57,335,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab252016e36f100e5c288fac6a881654e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int open_dr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00602">602</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00496">dir_nlst_read_converter()</a>, <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="errors_8h_source.html#l00038">ERROR_OK</a>, <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>, <a class="el" href="curl__provider_8c_source.html#l00081">File::name_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00090">curl_endpoint_t::name_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00406">open_file()</a>, <a class="el" href="curl__provider_8c_source.html#l00073">File::read_converter</a>, <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>, and <a class="el" href="curl__provider_8c_source.html#l00255">write_cb()</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = <a class="code" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7">open_file</a>(ep, tfd, buf, 1);</div>
<div class="line">    <span class="keywordflow">if</span> (fp != NULL) {</div>
<div class="line">        <span class="keywordtype">int</span> namelen = strlen(buf);</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a> = malloc(namelen + 1);</div>
<div class="line">        strncpy(fp-&gt;<a class="code" href="struct_file.html#a0e3e24bc9ba5677f31c8794332a1c440">name_buffer</a>, buf, namelen + 1);</div>
<div class="line"></div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a0e7d09393570ce6c7d8018fddacba3d7">read_converter</a> = &amp;<a class="code" href="curl__provider_8c.html#aaea2b7e3b5c317b82cd244472bf7ac76">dir_nlst_read_converter</a>;  <span class="comment">// do DIR conversion</span></div>
<div class="line">    </div>
<div class="line">        <span class="comment">// set for receiving</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_WRITEFUNCTION, <a class="code" href="curl__provider_8c.html#abe6bf4f5d85438de59a33df446ac73df">write_cb</a>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// TODO: support for MLST/MLSD FTP commands,</span></div>
<div class="line">        <span class="comment">// only they are so new, I still need to find a running one for tests</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// NLST is the &quot;name list&quot; without other data</span></div>
<div class="line">        strcpy(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, <span class="stringliteral">&quot;NLST &quot;</span>);</div>
<div class="line">        strcpy(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a> + strlen(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>), buf);</div>
<div class="line">        <span class="comment">// custom FTP command to make info more grokable</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_CUSTOMREQUEST, &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>));</div>
<div class="line"></div>
<div class="line">        <span class="comment">//add to multi session</span></div>
<div class="line">        CURLMcode rv = curl_multi_add_handle(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>, fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>);</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;multi add returns %d\n&quot;</span>, rv);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_ab252016e36f100e5c288fac6a881654e_cgraph.png" border="0" usemap="#curl__provider_8c_ab252016e36f100e5c288fac6a881654e_cgraph" alt=""/></div>
<map name="curl__provider_8c_ab252016e36f100e5c288fac6a881654e_cgraph" id="curl__provider_8c_ab252016e36f100e5c288fac6a881654e_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#aaea2b7e3b5c317b82cd244472bf7ac76" title="dir_nlst_read_converter" alt="" coords="126,70,287,98"/><area shape="rect" id="node13" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7" title="open_file" alt="" coords="169,147,244,175"/><area shape="rect" id="node27" href="curl__provider_8c.html#abe6bf4f5d85438de59a33df446ac73df" title="write_cb" alt="" coords="171,199,242,227"/><area shape="rect" id="node5" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="476,5,559,33"/><area shape="rect" id="node7" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="480,82,555,110"/><area shape="rect" id="node9" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb" title="pull_data" alt="" coords="344,31,419,59"/><area shape="rect" id="node15" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00" title="reserve_file" alt="" coords="336,186,426,214"/><area shape="rect" id="node25" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="347,238,415,266"/><area shape="rect" id="node17" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="480,134,555,162"/><area shape="rect" id="node19" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="482,186,553,214"/><area shape="rect" id="node21" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="609,213,666,241"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acbaeed54c34afef056df227e4b2ed0c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_file.html">File</a>* open_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00406">406</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00089">curl_endpoint_t::error_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00091">curl_endpoint_t::host_buffer</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="log_8c_source.html#l00087">log_info()</a>, <a class="el" href="curl__provider_8c_source.html#l00048">MAX_BUFFER_SIZE</a>, <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>, <a class="el" href="curl__provider_8c_source.html#l00090">curl_endpoint_t::name_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00092">curl_endpoint_t::path_buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00086">curl_endpoint_t::ptype</a>, <a class="el" href="curl__provider_8c_source.html#l00208">reserve_file()</a>, and <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00602">open_dr()</a>, and <a class="el" href="curl__provider_8c_source.html#l00463">open_rd()</a>.</p>
<div class="fragment"><div class="line">                                                                             {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = <a class="code" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00">reserve_file</a>(ep, tfd);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (fp != NULL) {</div>
<div class="line">        <span class="comment">// create session   </span></div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a> = curl_multi_init();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a> == NULL) {</div>
<div class="line">            <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;multi session is NULL\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> NULL;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> = curl_easy_init();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> == NULL) {</div>
<div class="line">            <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;easy session is NULL\n&quot;</span>);</div>
<div class="line">            curl_multi_cleanup(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>);</div>
<div class="line">            <span class="keywordflow">return</span> NULL;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set options</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_VERBOSE, (<span class="keywordtype">long</span>)1);</div>
<div class="line">        <span class="comment">//curl_easy_setopt(fp-&gt;session, CURLOPT_WRITEFUNCTION, write_cb);</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_WRITEDATA, fp);</div>
<div class="line">        <span class="comment">//curl_easy_setopt(fp-&gt;session, CURLOPT_READFUNCTION, read_cb);</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_READDATA, fp);</div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_ERRORBUFFER, &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#abbba3c62ae669fc89ed76d53ee4886a4">error_buffer</a>));</div>
<div class="line"></div>
<div class="line">        <span class="comment">// prepare name</span></div>
<div class="line">        strcpy(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, ((<a class="code" href="structprovider__t.html">provider_t</a>*)(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2b7c52a663a59bbdb7399fbf87004e96">ptype</a>))-&gt;name);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, <span class="stringliteral">&quot;://&quot;</span>);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ace4463d24183841559a97e3e75a9ae03">host_buffer</a>);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a24eb2dde30be6d54e6095f76b401c002">path_buffer</a>);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">        strcat(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>, buf);</div>
<div class="line">        <span class="keywordflow">if</span> (is_dir) {</div>
<div class="line">            <span class="comment">// end with a slash &quot;/&quot; to indicate a dir list</span></div>
<div class="line">            strcpy(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a> + strlen(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>), <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd">log_info</a>(<span class="stringliteral">&quot;curl URL: %s\n&quot;</span>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set URL</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_URL, &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#a2aefae77cbdd86c350ec55b262443279">name_buffer</a>));</div>
<div class="line"></div>
<div class="line">        <span class="comment">// debatable...</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_BUFFERSIZE, (<span class="keywordtype">long</span>) <a class="code" href="curl__provider_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// add to multi session</span></div>
<div class="line">        <span class="comment">//curl_multi_add_handle(fp-&gt;multi, fp-&gt;session);</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> fp;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_cgraph.png" border="0" usemap="#curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_cgraph" alt=""/></div>
<map name="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_cgraph" id="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="139,5,213,33"/><area shape="rect" id="node5" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="142,57,210,85"/><area shape="rect" id="node7" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00" title="reserve_file" alt="" coords="131,109,221,137"/><area shape="rect" id="node9" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="270,57,346,85"/><area shape="rect" id="node11" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="273,109,343,137"/><area shape="rect" id="node13" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="396,135,452,163"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_icgraph.png" border="0" usemap="#curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_icgraph" alt=""/></div>
<map name="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_icgraph" id="curl__provider_8c_acbaeed54c34afef056df227e4b2ed0c7_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="132,5,202,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae" title="open_rd" alt="" coords="132,57,202,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22d16e372721a3166d5208590a2e57ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int open_rd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00463">463</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="errors_8h_source.html#l00038">ERROR_OK</a>, <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>, <a class="el" href="curl__provider_8c_source.html#l00406">open_file()</a>, <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>, and <a class="el" href="curl__provider_8c_source.html#l00255">write_cb()</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = <a class="code" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7">open_file</a>(ep, tfd, buf, 0);</div>
<div class="line">    <span class="keywordflow">if</span> (fp != NULL) {</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set for receiving</span></div>
<div class="line">        curl_easy_setopt(fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>, CURLOPT_WRITEFUNCTION, <a class="code" href="curl__provider_8c.html#abe6bf4f5d85438de59a33df446ac73df">write_cb</a>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// HTTP</span></div>
<div class="line"><span class="comment">//  curl_easy_setopt(curl_handle, CURLOPT_USERAGENT, &quot;libcurl-agent/1.0&quot;);</span></div>
<div class="line">        <span class="comment">// protocol specific stuff  </span></div>
<div class="line">        <span class="comment">//if (fp-&gt;protocol == FTP) {</span></div>
<div class="line">        <span class="comment">//  // FTP append</span></div>
<div class="line">        <span class="comment">//  curl_easy_setopt(fp-&gt;session, CURLOPT_APPEND);</span></div>
<div class="line">        <span class="comment">//} </span></div>
<div class="line"></div>
<div class="line">        <span class="comment">//add to multi session</span></div>
<div class="line">        CURLMcode rv = curl_multi_add_handle(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>, fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a>);</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;multi add returns %d\n&quot;</span>, rv);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a22d16e372721a3166d5208590a2e57ae_cgraph.png" border="0" usemap="#curl__provider_8c_a22d16e372721a3166d5208590a2e57ae_cgraph" alt=""/></div>
<map name="curl__provider_8c_a22d16e372721a3166d5208590a2e57ae_cgraph" id="curl__provider_8c_a22d16e372721a3166d5208590a2e57ae_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7" title="open_file" alt="" coords="126,57,202,85"/><area shape="rect" id="node18" href="curl__provider_8c.html#abe6bf4f5d85438de59a33df446ac73df" title="write_cb" alt="" coords="129,109,199,137"/><area shape="rect" id="node5" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="259,5,333,33"/><area shape="rect" id="node7" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="262,57,330,85"/><area shape="rect" id="node9" href="curl__provider_8c.html#a4df323ddb4f39f3fc96c96d7e618ad00" title="reserve_file" alt="" coords="251,109,341,137"/><area shape="rect" id="node11" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="390,57,466,85"/><area shape="rect" id="node13" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="393,109,463,137"/><area shape="rect" id="node15" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="516,135,572,163"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a371038f10f9b4d15a4ae448c830ec6e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prov_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00227">227</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00070">File::chan</a>, <a class="el" href="curl__provider_8c_source.html#l00192">close_fd()</a>, <a class="el" href="curl__provider_8c_source.html#l00093">curl_endpoint_t::files</a>, <a class="el" href="log_8c_source.html#l00071">log_warn()</a>, <a class="el" href="curl__provider_8c_source.html#l00052">MAX_SESSIONS</a>, and <a class="el" href="curl__provider_8c_source.html#l00071">File::session</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="curl__provider_8c.html#ad3ef68d2292999ee3beb635427a515ef">MAX_SESSIONS</a>;i++) {</div>
<div class="line">        <a class="code" href="struct_file.html">File</a> *fp = &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a6bc501c3a717b50566214c2c0c84abc9">session</a> != NULL) {</div>
<div class="line">            <a class="code" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71">log_warn</a>(<span class="stringliteral">&quot;curl session %d is not NULL on free!&quot;</span>, fp-&gt;<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a>);</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727">close_fd</a>(&amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]));</div>
<div class="line">        }</div>
<div class="line">    free(ep);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a371038f10f9b4d15a4ae448c830ec6e3_cgraph.png" border="0" usemap="#curl__provider_8c_a371038f10f9b4d15a4ae448c830ec6e3_cgraph" alt=""/></div>
<map name="curl__provider_8c_a371038f10f9b4d15a4ae448c830ec6e3_cgraph" id="curl__provider_8c_a371038f10f9b4d15a4ae448c830ec6e3_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="134,5,205,33"/><area shape="rect" id="node7" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="132,57,207,85"/><area shape="rect" id="node5" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="257,5,314,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa8b6603bc58ebca606ad8ee5cf2eccdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static CURLMcode pull_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>cep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_file.html">File</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>eof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00290">290</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>, <a class="el" href="curl__provider_8c_source.html#l00089">curl_endpoint_t::error_buffer</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, and <a class="el" href="curl__provider_8c_source.html#l00072">File::multi</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00496">dir_nlst_read_converter()</a>, <a class="el" href="curl__provider_8c_source.html#l00366">read_file()</a>, and <a class="el" href="curl__provider_8c_source.html#l00335">reply_with_data()</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line">    <span class="keywordtype">int</span> running_handles = 0;</div>
<div class="line">    </div>
<div class="line">    *eof = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> = 0;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> = 0;</div>
<div class="line"></div>
<div class="line">    CURLMcode rv = CURLM_OK;</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        rv = curl_multi_perform(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>, &amp;running_handles);</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (rv != 0 || running_handles != 1) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;curl read file returns: %d, running=%d\n&quot;</span>, rv, running_handles);</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    } <span class="keywordflow">while</span> (rv == CURLM_CALL_MULTI_PERFORM);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (running_handles == 0) {</div>
<div class="line">        <span class="comment">// no more data will be available</span></div>
<div class="line">        <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;pull_data sets EOF (running=0), rv=%d, datalen=%d\n&quot;</span>, rv, fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>);</div>
<div class="line">        *eof = 1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> msgs_in_queue = 0;</div>
<div class="line">    CURLMsg *cmsg = NULL;</div>
<div class="line">    <span class="keywordflow">while</span> ((cmsg = curl_multi_info_read(fp-&gt;<a class="code" href="struct_file.html#a8b65cf8f95c8f900b2fa0aeb1068d52c">multi</a>, &amp;msgs_in_queue)) != NULL) {</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL   </span></div>
<div class="line"><span class="preprocessor"></span>        printf(<span class="stringliteral">&quot;cmsg=%p, in queue=%d\n&quot;</span>, (<span class="keywordtype">void</span>*)cmsg, msgs_in_queue);</div>
<div class="line"><span class="preprocessor">#endif  </span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">// we only added one easy handle, so easy_handle is known</span></div>
<div class="line">        CURLMSG msg = cmsg-&gt;msg;</div>
<div class="line">        <span class="keywordflow">if</span> (msg == CURLMSG_DONE) {</div>
<div class="line">            CURLcode cc = cmsg-&gt;data.result;</div>
<div class="line">            <span class="comment">//printf(&quot;cc = %d\n&quot;, cc);</span></div>
<div class="line">            <span class="keywordflow">if</span> (cc != CURLE_OK) {</div>
<div class="line">                <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;errorbuffer = %s\n&quot;</span>, cep-&gt;<a class="code" href="structcurl__endpoint__t.html#abbba3c62ae669fc89ed76d53ee4886a4">error_buffer</a>);</div>
<div class="line">            }</div>
<div class="line">            <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;pull_data sets EOF (err msg)\n&quot;</span>);</div>
<div class="line">            *eof = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> rv;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_cgraph.png" border="0" usemap="#curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_cgraph" alt=""/></div>
<map name="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_cgraph" id="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_cgraph">
<area shape="rect" id="node3" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="132,5,215,33"/><area shape="rect" id="node5" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="136,57,211,85"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_icgraph.png" border="0" usemap="#curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_icgraph" alt=""/></div>
<map name="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_icgraph" id="curl__provider_8c_aa8b6603bc58ebca606ad8ee5cf2eccdb_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#aaea2b7e3b5c317b82cd244472bf7ac76" title="dir_nlst_read_converter" alt="" coords="131,5,293,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07" title="read_file" alt="" coords="341,82,414,110"/><area shape="rect" id="node9" href="curl__provider_8c.html#ae5a236759bf38100c5802d27962ec5db" title="reply_with_data" alt="" coords="155,109,269,137"/><area shape="rect" id="node5" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="342,5,412,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c76deaf818e476e541fbe083cebde07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>retbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>eof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00366">366</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>, <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="curl__provider_8c_source.html#l00180">find_file()</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="curl__provider_8c_source.html#l00290">pull_data()</a>, <a class="el" href="curl__provider_8c_source.html#l00073">File::read_converter</a>, <a class="el" href="curl__provider_8c_source.html#l00080">File::read_state</a>, and <a class="el" href="curl__provider_8c_source.html#l00335">reply_with_data()</a>.</p>
<div class="fragment"><div class="line">                                                                               {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = <a class="code" href="curl__provider_8c.html#a8cf5652c677f33cbe6206af837b23e77">find_file</a>(ep, tfd);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (fp != NULL) {</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a0e7d09393570ce6c7d8018fddacba3d7">read_converter</a> != NULL) {</div>
<div class="line">            <span class="comment">// mostly used for directory</span></div>
<div class="line">            <span class="comment">// I&#39;ll never understand where I need a &quot;struct&quot; ...</span></div>
<div class="line">            <span class="keywordflow">return</span> fp-&gt;<a class="code" href="struct_file.html#a0e7d09393570ce6c7d8018fddacba3d7">read_converter</a>((<span class="keyword">struct</span> <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*)cep, fp, retbuf, len, eof);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> &gt; fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>) {</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>            printf(<span class="stringliteral">&quot;Got some data already: datalen=%d\n&quot;</span>, fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">return</span> <a class="code" href="curl__provider_8c.html#ae5a236759bf38100c5802d27962ec5db">reply_with_data</a>(cep, fp, retbuf, len, eof);</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// we don&#39;t have enough data to send something</span></div>
<div class="line">        CURLMcode rv = <a class="code" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb">pull_data</a>(cep, fp, &amp;(fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>));</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> &gt; fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>) {</div>
<div class="line">            <span class="comment">// we should now have some data to give back</span></div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>            printf(<span class="stringliteral">&quot;Pulled some data: datalen=%d, eof=%d\n&quot;</span>, fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>, *eof);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>            <span class="keywordflow">return</span> <a class="code" href="curl__provider_8c.html#ae5a236759bf38100c5802d27962ec5db">reply_with_data</a>(cep, fp, retbuf, len, eof);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (rv == CURLM_OK) {</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;fp is NULL on read attempt\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> -<a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a3c76deaf818e476e541fbe083cebde07_cgraph.png" border="0" usemap="#curl__provider_8c_a3c76deaf818e476e541fbe083cebde07_cgraph" alt=""/></div>
<map name="curl__provider_8c_a3c76deaf818e476e541fbe083cebde07_cgraph" id="curl__provider_8c_a3c76deaf818e476e541fbe083cebde07_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a8cf5652c677f33cbe6206af837b23e77" title="find_file" alt="" coords="149,5,216,33"/><area shape="rect" id="node7" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="419,70,493,98"/><area shape="rect" id="node9" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb" title="pull_data" alt="" coords="289,109,364,137"/><area shape="rect" id="node14" href="curl__provider_8c.html#ae5a236759bf38100c5802d27962ec5db" title="reply_with_data" alt="" coords="125,159,240,187"/><area shape="rect" id="node5" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="289,5,364,33"/><area shape="rect" id="node11" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="414,147,498,175"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae5a236759bf38100c5802d27962ec5db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reply_with_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>cep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_file.html">File</a> *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>retbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>eof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00335">335</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00075">File::buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="curl__provider_8c_source.html#l00290">pull_data()</a>, and <a class="el" href="curl__provider_8c_source.html#l00080">File::read_state</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00366">read_file()</a>.</p>
<div class="fragment"><div class="line">                                                                                            {</div>
<div class="line">    <span class="comment">// we already have some data to give back</span></div>
<div class="line">    <span class="keywordtype">int</span> datalen = fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> - fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (datalen &gt; len) {</div>
<div class="line">        <span class="comment">// we have more data than requested</span></div>
<div class="line">        datalen = len;</div>
<div class="line">    }</div>
<div class="line">    memcpy(retbuf, &amp;(fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a>[fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>]), datalen);</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> += datalen;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> &lt;= fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>) {</div>
<div class="line">        <span class="comment">// reached the end of the buffer</span></div>
<div class="line">        CURLMcode rv = CURLM_OK;</div>
<div class="line">        <span class="keywordflow">if</span> (!fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>) {      <span class="comment">// set from previous pull_data</span></div>
<div class="line">            <span class="comment">// try to pull in more, so we see if eof should be sent</span></div>
<div class="line">            rv = <a class="code" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb">pull_data</a>(cep, fp, &amp;(fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a>));</div>
<div class="line">            <span class="keywordflow">if</span> (rv != CURLM_OK) {</div>
<div class="line">                <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;reply_with_data sets EOF rv=%d, datalen=%d\n&quot;</span>, rv, fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a>);</div>
<div class="line">                *eof = 1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#af6b0a84e19d8a798fbb3e776ec6c9d4b">read_state</a> &amp;&amp; fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> &lt;= fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a>) {</div>
<div class="line">            <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;reply with data sets EOF (2)\n&quot;</span>);</div>
<div class="line">            *eof = 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> datalen;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_cgraph.png" border="0" usemap="#curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_cgraph" alt=""/></div>
<map name="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_cgraph" id="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_cgraph">
<area shape="rect" id="node3" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="294,5,378,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#aa8b6603bc58ebca606ad8ee5cf2eccdb" title="pull_data" alt="" coords="169,57,244,85"/><area shape="rect" id="node8" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="299,57,373,85"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_icgraph.png" border="0" usemap="#curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_icgraph" alt=""/></div>
<map name="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_icgraph" id="curl__provider_8c_ae5a236759bf38100c5802d27962ec5db_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07" title="read_file" alt="" coords="168,5,240,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4df323ddb4f39f3fc96c96d7e618ad00"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="struct_file.html">File</a>* reserve_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00208">208</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00070">File::chan</a>, <a class="el" href="curl__provider_8c_source.html#l00192">close_fd()</a>, <a class="el" href="curl__provider_8c_source.html#l00093">curl_endpoint_t::files</a>, <a class="el" href="curl__provider_8c_source.html#l00105">init_fp()</a>, <a class="el" href="log_8c_source.html#l00071">log_warn()</a>, and <a class="el" href="curl__provider_8c_source.html#l00052">MAX_SESSIONS</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00406">open_file()</a>.</p>
<div class="fragment"><div class="line">                                                    {</div>
<div class="line">    <a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a> *cep = (<a class="code" href="structcurl__endpoint__t.html">curl_endpoint_t</a>*) ep;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="curl__provider_8c.html#ad3ef68d2292999ee3beb635427a515ef">MAX_SESSIONS</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i].<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a> == chan) {</div>
<div class="line">            <a class="code" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71">log_warn</a>(<span class="stringliteral">&quot;curl session still open for chan %d\n&quot;</span>, chan);</div>
<div class="line">            <a class="code" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727">close_fd</a>(&amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]));</div>
<div class="line">        } </div>
<div class="line">        <span class="keywordflow">if</span> (cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i].<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a> &lt; 0) {</div>
<div class="line">            <a class="code" href="struct_file.html">File</a> *fp = &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]);</div>
<div class="line">            <a class="code" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272">init_fp</a>(fp);</div>
<div class="line">            fp-&gt;<a class="code" href="struct_file.html#a029c258ce4f699b778c719cd0ef54d1b">chan</a> = chan;</div>
<div class="line">            <span class="keywordflow">return</span> &amp;(cep-&gt;<a class="code" href="structcurl__endpoint__t.html#ac0fa6528e1ced6b6a1c35e2e6572c5cd">files</a>[i]);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71">log_warn</a>(<span class="stringliteral">&quot;Did not find free curl session for channel=%d\n&quot;</span>, chan);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_cgraph.png" border="0" usemap="#curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_cgraph" alt=""/></div>
<map name="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_cgraph" id="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_cgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#a2cf2a55043b128deb09fc4adf96d8727" title="close_fd" alt="" coords="147,5,218,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a0a39fc856ef71e3d8c7551c20b632272" title="init_fp" alt="" coords="270,31,327,59"/><area shape="rect" id="node8" href="log_8c.html#a157f7b0cfbdc0bcda5c1c0778cff4b71" title="log_warn" alt="" coords="145,109,220,137"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_icgraph.png" border="0" usemap="#curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_icgraph" alt=""/></div>
<map name="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_icgraph" id="curl__provider_8c_a4df323ddb4f39f3fc96c96d7e618ad00_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#acbaeed54c34afef056df227e4b2ed0c7" title="open_file" alt="" coords="145,31,220,59"/><area shape="rect" id="node5" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="270,5,340,33"/><area shape="rect" id="node7" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae" title="open_rd" alt="" coords="270,57,340,85"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abe6bf4f5d85438de59a33df446ac73df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t write_cb </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmemb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00255">255</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>References <a class="el" href="curl__provider_8c_source.html#l00077">File::bufdatalen</a>, <a class="el" href="curl__provider_8c_source.html#l00075">File::buffer</a>, <a class="el" href="curl__provider_8c_source.html#l00076">File::buflen</a>, and <a class="el" href="curl__provider_8c_source.html#l00078">File::bufrp</a>.</p>

<p>Referenced by <a class="el" href="curl__provider_8c_source.html#l00602">open_dr()</a>, and <a class="el" href="curl__provider_8c_source.html#l00463">open_rd()</a>.</p>
<div class="fragment"><div class="line">                                                                         {</div>
<div class="line"></div>
<div class="line">    <a class="code" href="struct_file.html">File</a> *fp = (<a class="code" href="struct_file.html">File</a>*) user;</div>
<div class="line"></div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">long</span> inlen = size * nmemb;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CURL</span></div>
<div class="line"><span class="preprocessor"></span>printf(<span class="stringliteral">&quot;write_cb-&gt; %ld (buffer is %d): &quot;</span>, inlen, fp-&gt;<a class="code" href="struct_file.html#a20cc6ed09a3d84d74f09f49179a2ccc8">buflen</a>);</div>
<div class="line"><span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#a20cc6ed09a3d84d74f09f49179a2ccc8">buflen</a> &gt; 0) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;%02x &quot;</span>, ptr[0]);</div>
<div class="line">}</div>
<div class="line">printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="keywordflow">if</span> (inlen &gt; fp-&gt;<a class="code" href="struct_file.html#a20cc6ed09a3d84d74f09f49179a2ccc8">buflen</a>) {</div>
<div class="line">        free(fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a>);   <span class="comment">// fp-&gt;buffer NULL is ok, nothing is done</span></div>
<div class="line">        <span class="keywordtype">int</span> alloclen = inlen &lt; 8192 ? 8192 : inlen;</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a> = malloc(alloclen);</div>
<div class="line">        <span class="keywordflow">if</span> (fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a> == NULL) {</div>
<div class="line">            <span class="comment">// malloc failed</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;malloc failed!\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        fp-&gt;<a class="code" href="struct_file.html#a20cc6ed09a3d84d74f09f49179a2ccc8">buflen</a> = alloclen;</div>
<div class="line">    }</div>
<div class="line">    memcpy(fp-&gt;<a class="code" href="struct_file.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a>, ptr, inlen);</div>
<div class="line">    </div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a56134ed8953ad7a2e3a77c41e50d4a10">bufdatalen</a> = inlen;</div>
<div class="line">    fp-&gt;<a class="code" href="struct_file.html#a316a76302e5e155a3254a07a16fca5b7">bufrp</a> = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> inlen;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="curl__provider_8c_abe6bf4f5d85438de59a33df446ac73df_icgraph.png" border="0" usemap="#curl__provider_8c_abe6bf4f5d85438de59a33df446ac73df_icgraph" alt=""/></div>
<map name="curl__provider_8c_abe6bf4f5d85438de59a33df446ac73df_icgraph" id="curl__provider_8c_abe6bf4f5d85438de59a33df446ac73df_icgraph">
<area shape="rect" id="node3" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e" title="open_dr" alt="" coords="126,5,196,33"/><area shape="rect" id="node5" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae" title="open_rd" alt="" coords="126,57,196,85"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af14d708842cc58180467908fae5b43c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> ftp_provider</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;ftp&quot;</span>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a5c91119276329daa47005a88c09c7010">curl_init</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#acd513f373f231b1cc581ee0f9c41c299">ftp_new</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a371038f10f9b4d15a4ae448c830ec6e3">prov_free</a>,</div>
<div class="line"></div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89">close_fds</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae">open_rd</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    <a class="code" href="curl__provider_8c.html#ab252016e36f100e5c288fac6a881654e">open_dr</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07">read_file</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3ac688150bdcdb56d532dab21fbef4f9">do_chdir</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL  </div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00726">726</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>Referenced by <a class="el" href="curl__test_8c_source.html#l00047">ftp_test()</a>.</p>

</div>
</div>
<a class="anchor" id="a72e4992cbe72ae59315192b31485b171"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> http_provider</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    <span class="stringliteral">&quot;http&quot;</span>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a5c91119276329daa47005a88c09c7010">curl_init</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a63378f50c7208fdbb05bc7a337801f9f">http_new</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a371038f10f9b4d15a4ae448c830ec6e3">prov_free</a>,</div>
<div class="line"></div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3f721d6318d51a3c6579bf0cedf4db89">close_fds</a>,</div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a22d16e372721a3166d5208590a2e57ae">open_rd</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3c76deaf818e476e541fbe083cebde07">read_file</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    NULL, </div>
<div class="line">    <a class="code" href="curl__provider_8c.html#a3ac688150bdcdb56d532dab21fbef4f9">do_chdir</a>,</div>
<div class="line">    NULL, </div>
<div class="line">    NULL  </div>
<div class="line">}</div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="curl__provider_8c_source.html#l00747">747</a> of file <a class="el" href="curl__provider_8c_source.html">curl_provider.c</a>.</p>

<p>Referenced by <a class="el" href="curl__test_8c_source.html#l00058">http_test()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 4 2012 04:37:40 for XD2031 pcserver by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
