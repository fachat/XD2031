<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XD2031 pcserver: fscmd.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XD2031 pcserver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fscmd.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;dirent.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;strings.h&gt;</code><br/>
<code>#include &lt;ctype.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="wireformat_8h_source.html">wireformat.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="fscmd_8h_source.html">fscmd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="dir_8h_source.html">dir.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="provider_8h_source.html">provider.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="log_8h_source.html">log.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fscmd.c:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c__incl.png" border="0" usemap="#fscmd_8c" alt=""/></div>
<map name="fscmd_8c" id="fscmd_8c">
<area shape="rect" id="node17" href="wireformat_8h.html" title="wireformat.h" alt="" coords="631,83,725,111"/><area shape="rect" id="node21" href="fscmd_8h.html" title="fscmd.h" alt="" coords="750,83,817,111"/><area shape="rect" id="node23" href="dir_8h.html" title="dir.h" alt="" coords="842,83,888,111"/><area shape="rect" id="node25" href="provider_8h.html" title="provider.h" alt="" coords="912,83,991,111"/><area shape="rect" id="node27" href="log_8h.html" title="log.h" alt="" coords="1016,83,1065,111"/><area shape="rect" id="node19" href="errors_8h.html" title="errors.h" alt="" coords="645,161,712,189"/></map>
</div>
</div>
<p><a href="fscmd_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structchan__t.html">chan_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad4d796b98c583d49e83adabd74a63bf6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="separator:ad4d796b98c583d49e83adabd74a63bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acadd9e503504342f43686c95c6ea9f44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44">do_cmd</a> (char *buf, int fs)</td></tr>
<tr class="separator:acadd9e503504342f43686c95c6ea9f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae21e9ca6714643d0c4f35cb0cc9fe792"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#ae21e9ca6714643d0c4f35cb0cc9fe792">chan_init</a> ()</td></tr>
<tr class="separator:ae21e9ca6714643d0c4f35cb0cc9fe792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1bdc89cd482dffb2699bf75b00ec8d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4">chan_to_endpoint</a> (int chan)</td></tr>
<tr class="separator:ac1bdc89cd482dffb2699bf75b00ec8d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf74fcccb28f36e76be0205105ac046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#a4bf74fcccb28f36e76be0205105ac046">free_chan</a> (int channo)</td></tr>
<tr class="separator:a4bf74fcccb28f36e76be0205105ac046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b21bf4d0a558a8ff9c39e2d7666d834"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834">set_chan</a> (int channo, <a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *<a class="el" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>)</td></tr>
<tr class="separator:a7b21bf4d0a558a8ff9c39e2d7666d834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39e508f0407f0116610fe76bad3b699"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#ab39e508f0407f0116610fe76bad3b699">cmd_init</a> ()</td></tr>
<tr class="separator:ab39e508f0407f0116610fe76bad3b699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c10a83750f826bd67a461d2ea0e2ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#a05c10a83750f826bd67a461d2ea0e2ec">cmd_assign_from_cmdline</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a05c10a83750f826bd67a461d2ea0e2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439ae5539b93e14dd0f6ae8d752c74d3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#a439ae5539b93e14dd0f6ae8d752c74d3">cmd_sync</a> (int readfd, int writefd)</td></tr>
<tr class="separator:a439ae5539b93e14dd0f6ae8d752c74d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25b6cff487bba61e8cb39a9e17e859e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#aa25b6cff487bba61e8cb39a9e17e859e">cmd_loop</a> (int readfd, int writefd)</td></tr>
<tr class="separator:aa25b6cff487bba61e8cb39a9e17e859e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa55975c4bef9aa0329dfa07574565536"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structchan__t.html">chan_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a> [<a class="el" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>]</td></tr>
<tr class="separator:aa55975c4bef9aa0329dfa07574565536"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad4d796b98c583d49e83adabd74a63bf6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BUFFER_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00053">53</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae21e9ca6714643d0c4f35cb0cc9fe792"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void chan_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00069">69</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00062">chan_t::channo</a>, and <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00116">cmd_init()</a>.</p>
<div class="fragment"><div class="line">                 {</div>
<div class="line">       <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">          <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#af803c13b16ba71039de51fc48be901e9">channo</a> = -1;</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_ae21e9ca6714643d0c4f35cb0cc9fe792_icgraph.png" border="0" usemap="#fscmd_8c_ae21e9ca6714643d0c4f35cb0cc9fe792_icgraph" alt=""/></div>
<map name="fscmd_8c_ae21e9ca6714643d0c4f35cb0cc9fe792_icgraph" id="fscmd_8c_ae21e9ca6714643d0c4f35cb0cc9fe792_icgraph">
<area shape="rect" id="node3" href="fscmd_8h.html#ab39e508f0407f0116610fe76bad3b699" title="cmd_init" alt="" coords="129,5,199,33"/><area shape="rect" id="node5" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="248,5,298,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac1bdc89cd482dffb2699bf75b00ec8d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a>* chan_to_endpoint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00076">76</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00063">chan_t::ep</a>, <a class="el" href="log_8c_source.html#l00087">log_info()</a>, and <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line"></div>
<div class="line">       <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">               <span class="keywordflow">if</span> (<a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].channo == chan) {</div>
<div class="line">                       <span class="keywordflow">return</span> <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>;</div>
<div class="line">               }</div>
<div class="line">        }</div>
<div class="line">       <a class="code" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd">log_info</a>(<span class="stringliteral">&quot;Did not find ep for channel %d\n&quot;</span>, chan);</div>
<div class="line">       <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_cgraph.png" border="0" usemap="#fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_cgraph" alt=""/></div>
<map name="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_cgraph" id="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="182,5,250,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_icgraph.png" border="0" usemap="#fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_icgraph" alt=""/></div>
<map name="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_icgraph" id="fscmd_8c_ac1bdc89cd482dffb2699bf75b00ec8d4_icgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="182,5,250,33"/><area shape="rect" id="node5" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="299,5,378,33"/><area shape="rect" id="node7" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="427,5,477,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a05c10a83750f826bd67a461d2ea0e2ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cmd_assign_from_cmdline </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>take the command line, search for "-A&lt;driv&gt;=&lt;name&gt;" parameters and assign the value </p>

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00125">125</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00079">log_error()</a>, and <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>.</p>

<p>Referenced by <a class="el" href="fsser_8c_source.html#l00140">main()</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; argc; i++) {</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ((strlen(argv[i]) &gt;4) </div>
<div class="line">            &amp;&amp; argv[i][0] == <span class="charliteral">&#39;-&#39;</span></div>
<div class="line">            &amp;&amp; argv[i][1] == <span class="charliteral">&#39;A&#39;</span>) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!isdigit(argv[i][2])) {</div>
<div class="line">                <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;Could not identify %c as drive number!\n&quot;</span>, argv[i][2]);</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (argv[i][3] != <span class="charliteral">&#39;=&#39;</span>) {</div>
<div class="line">                <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;Could not identify %s as ASSIGN parameter\n&quot;</span>, argv[i]);</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">    </div>
<div class="line">            <span class="keywordtype">int</span> rv = <a class="code" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d">provider_assign</a>(argv[i][2] &amp; 0x0f, &amp;(argv[i][4]));</div>
<div class="line">            <span class="keywordflow">if</span> (rv &lt; 0) {</div>
<div class="line">                <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;Could not assign, error number is %d\n&quot;</span>, rv);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_cgraph.png" border="0" usemap="#fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_cgraph" alt=""/></div>
<map name="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_cgraph" id="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="256,5,331,33"/><area shape="rect" id="node5" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d" title="provider_assign" alt="" coords="236,57,351,85"/><area shape="rect" id="node7" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="425,5,493,33"/><area shape="rect" id="node9" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63" title="provider_lookup" alt="" coords="401,57,517,85"/><area shape="rect" id="node11" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="417,109,500,137"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_icgraph.png" border="0" usemap="#fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_icgraph" alt=""/></div>
<map name="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_icgraph" id="fscmd_8c_a05c10a83750f826bd67a461d2ea0e2ec_icgraph">
<area shape="rect" id="node3" href="fsser_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="235,5,285,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab39e508f0407f0116610fe76bad3b699"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cmd_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00116">116</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00069">chan_init()</a>, and <a class="el" href="provider_8c_source.html#l00152">provider_init()</a>.</p>

<p>Referenced by <a class="el" href="fsio_8c_source.html#l00071">main()</a>.</p>
<div class="fragment"><div class="line">                {</div>
<div class="line">    <a class="code" href="provider_8c.html#ace7b8936edf7a06cda75602ded054086">provider_init</a>();</div>
<div class="line">    <a class="code" href="fscmd_8c.html#ae21e9ca6714643d0c4f35cb0cc9fe792">chan_init</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_cgraph.png" border="0" usemap="#fscmd_8c_ab39e508f0407f0116610fe76bad3b699_cgraph" alt=""/></div>
<map name="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_cgraph" id="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_cgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#ae21e9ca6714643d0c4f35cb0cc9fe792" title="chan_init" alt="" coords="135,5,209,33"/><area shape="rect" id="node5" href="provider_8c.html#ace7b8936edf7a06cda75602ded054086" title="provider_init" alt="" coords="125,57,219,85"/><area shape="rect" id="node7" href="provider_8c.html#ad9a7ae74bd508938f66505cd74bc1cca" title="provider_register" alt="" coords="267,57,389,85"/><area shape="rect" id="node9" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="437,57,512,85"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_icgraph.png" border="0" usemap="#fscmd_8c_ab39e508f0407f0116610fe76bad3b699_icgraph" alt=""/></div>
<map name="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_icgraph" id="fscmd_8c_ab39e508f0407f0116610fe76bad3b699_icgraph">
<area shape="rect" id="node3" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="126,5,176,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa25b6cff487bba61e8cb39a9e17e859e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cmd_loop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>readfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writefd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>this is the main loop of the program</p>
<p>Here the data is read from the given readfd, put into a packet buffer, then given to <a class="el" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44">do_cmd()</a> for the actual execution, and the reply is again packeted and written to the writefd </p>

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00191">191</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00151">cmd_sync()</a>, <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>, <a class="el" href="wireformat_8h_source.html#l00046">FS_SYNC</a>, <a class="el" href="wireformat_8h_source.html#l00034">FSP_CMD</a>, <a class="el" href="wireformat_8h_source.html#l00037">FSP_DATA</a>, and <a class="el" href="wireformat_8h_source.html#l00035">FSP_LEN</a>.</p>

<p>Referenced by <a class="el" href="fsio_8c_source.html#l00071">main()</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line"></div>
<div class="line">        <span class="keywordtype">char</span> buf[8192];</div>
<div class="line">        <span class="keywordtype">int</span> wrp,rdp,plen, cmd;</div>
<div class="line">        <span class="keywordtype">int</span> n;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// sync device and server</span></div>
<div class="line">    <a class="code" href="fscmd_8c.html#a439ae5539b93e14dd0f6ae8d752c74d3">cmd_sync</a>(readfd, writefd);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* write and read pointers in the input buffer &quot;buf&quot; */</span></div>
<div class="line">        wrp = rdp = 0;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">while</span>((n=read(readfd, buf+wrp, 8192-wrp))!=0) {</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_READ</span></div>
<div class="line"><span class="preprocessor"></span>          printf(<span class="stringliteral">&quot;read %d bytes: &quot;</span>,n);</div>
<div class="line">          <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++) printf(<span class="stringliteral">&quot;%02x &quot;</span>,255&amp;buf[wrp+i]); printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">              <span class="keywordflow">if</span>(n&lt;0) {</div>
<div class="line">                fprintf(stderr,<span class="stringliteral">&quot;fstcp: read error %d (%s)\n&quot;</span>,errno,strerror(errno));</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">              }</div>
<div class="line">              wrp+=n;</div>
<div class="line">              <span class="keywordflow">if</span>(rdp &amp;&amp; (wrp==8192 || rdp==wrp)) {</div>
<div class="line">                <span class="keywordflow">if</span>(rdp!=wrp) {</div>
<div class="line">                  memmove(buf, buf+rdp, wrp-rdp);</div>
<div class="line">                }</div>
<div class="line">                wrp -= rdp;</div>
<div class="line">                rdp = 0;</div>
<div class="line">              }</div>
<div class="line"><span class="comment">//printf(&quot;wrp=%d, rdp=%d, FSP_LEN=%d\n&quot;,wrp,rdp,FSP_LEN);</span></div>
<div class="line">              <span class="comment">// as long as we have more than FSP_LEN bytes in the buffer</span></div>
<div class="line">              <span class="comment">// i.e. 2 or more, we loop and process packets</span></div>
<div class="line">              <span class="comment">// FSP_LEN is the position of the packet length</span></div>
<div class="line">              <span class="keywordflow">while</span>(wrp-rdp &gt; <a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>) {</div>
<div class="line">                <span class="comment">// first byte in packet is command, second is length of packet</span></div>
<div class="line">                plen = 255 &amp; buf[rdp+<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>];  <span class="comment">//  AND with 255 to fix sign</span></div>
<div class="line">                cmd = 255 &amp; buf[rdp+<a class="code" href="wireformat_8h.html#a2664d40614a37a48577a1e0d923baa23">FSP_CMD</a>];   <span class="comment">//  AND with 255 to fix sign</span></div>
<div class="line"><span class="comment">//printf(&quot;wrp-rdp=%d, plen=%d\n&quot;,wrp-rdp,plen);</span></div>
<div class="line">                <span class="comment">// full packet received already?</span></div>
<div class="line">                <span class="keywordflow">if</span> (cmd == <a class="code" href="wireformat_8h.html#a0e1740f8851fca2f213c033d385f4667">FS_SYNC</a> || plen &lt; <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>) {</div>
<div class="line">          <span class="comment">// a packet is at least 3 bytes (when with zero data length)</span></div>
<div class="line">          <span class="comment">// or the byte is the FS_SYNC command</span></div>
<div class="line">          <span class="comment">// so ignore byte and shift one in buffer position</span></div>
<div class="line">          rdp++;</div>
<div class="line">        } <span class="keywordflow">else</span> </div>
<div class="line">                <span class="keywordflow">if</span>(wrp-rdp &gt;= plen) {</div>
<div class="line">                  <span class="comment">// yes, then execute</span></div>
<div class="line">                  <a class="code" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44">do_cmd</a>(buf+rdp, writefd);</div>
<div class="line">                  rdp +=plen;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                  <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">              }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_cgraph.png" border="0" usemap="#fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_cgraph" alt=""/></div>
<map name="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_cgraph" id="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_cgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#a439ae5539b93e14dd0f6ae8d752c74d3" title="cmd_sync" alt="" coords="134,83,215,111"/><area shape="rect" id="node7" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="140,213,209,241"/><area shape="rect" id="node5" href="log_8c.html#a4500b79e646dcead32849b2fdae4ffd1" title="log_errno" alt="" coords="289,5,367,33"/><area shape="rect" id="node9" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="457,271,540,299"/><area shape="rect" id="node11" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="461,135,536,163"/><area shape="rect" id="node13" href="log_8c.html#a47a02a13f399183905b4a4512774f0be" title="log_term" alt="" coords="291,109,365,137"/><area shape="rect" id="node15" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63" title="provider_lookup" alt="" coords="441,349,557,377"/><area shape="rect" id="node17" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834" title="set_chan" alt="" coords="290,213,366,241"/><area shape="rect" id="node20" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4" title="chan_to_endpoint" alt="" coords="264,419,392,447"/><area shape="rect" id="node24" href="fscmd_8c.html#a4bf74fcccb28f36e76be0205105ac046" title="free_chan" alt="" coords="288,161,368,189"/><area shape="rect" id="node26" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d" title="provider_assign" alt="" coords="270,367,386,395"/><area shape="rect" id="node22" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="465,413,533,441"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_icgraph.png" border="0" usemap="#fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_icgraph" alt=""/></div>
<map name="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_icgraph" id="fscmd_8c_aa25b6cff487bba61e8cb39a9e17e859e_icgraph">
<area shape="rect" id="node3" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="134,5,184,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a439ae5539b93e14dd0f6ae8d752c74d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cmd_sync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>readfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writefd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00151">151</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="wireformat_8h_source.html#l00046">FS_SYNC</a>, and <a class="el" href="log_8c_source.html#l00058">log_errno()</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00191">cmd_loop()</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">    <span class="keywordtype">char</span> syncbuf[1];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// first sync the device and the server.</span></div>
<div class="line">    <span class="comment">// I.e. we send an FS_SYNC byte, and wait for the sync byte return,</span></div>
<div class="line">    <span class="comment">// ignoreing all other bytes</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// write the sync byte</span></div>
<div class="line">    syncbuf[0] = <a class="code" href="wireformat_8h.html#a0e1740f8851fca2f213c033d385f4667">FS_SYNC</a>;</div>
<div class="line">    <span class="keywordtype">int</span> e = 0;</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="preprocessor">#if defined DEBUG_WRITE || defined DEBUG_CMD</span></div>
<div class="line"><span class="preprocessor"></span>        printf(<span class="stringliteral">&quot;sync write %02x\n&quot;</span>, syncbuf[0]);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        e = write(writefd, syncbuf, 1);</div>
<div class="line">    } <span class="keywordflow">while</span> (e == 0 || (e &lt; 0 &amp;&amp;  errno == EAGAIN));</div>
<div class="line">    <span class="keywordflow">if</span> (e &lt; 0) {</div>
<div class="line">        <a class="code" href="log_8c.html#a4500b79e646dcead32849b2fdae4ffd1">log_errno</a>(<span class="stringliteral">&quot;Error on sync write&quot;</span>, errno);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// wait for a sync byte</span></div>
<div class="line">    <span class="keywordtype">int</span> n = 0;</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        n = read(readfd, syncbuf, 1);</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_READ</span></div>
<div class="line"><span class="preprocessor"></span>            printf(<span class="stringliteral">&quot;sync read %d bytes: &quot;</span>,n);</div>
<div class="line">            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++) printf(<span class="stringliteral">&quot;%02x &quot;</span>,255&amp;syncbuf[i]); printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span> (n &lt; 0) {</div>
<div class="line">            <a class="code" href="log_8c.html#a4500b79e646dcead32849b2fdae4ffd1">log_errno</a>(<span class="stringliteral">&quot;Error on sync read&quot;</span>, errno);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (n != 1 || (0xff &amp; syncbuf[0]) != <a class="code" href="wireformat_8h.html#a0e1740f8851fca2f213c033d385f4667">FS_SYNC</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_cgraph.png" border="0" usemap="#fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_cgraph" alt=""/></div>
<map name="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_cgraph" id="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a4500b79e646dcead32849b2fdae4ffd1" title="log_errno" alt="" coords="136,5,214,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_icgraph.png" border="0" usemap="#fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_icgraph" alt=""/></div>
<map name="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_icgraph" id="fscmd_8c_a439ae5539b93e14dd0f6ae8d752c74d3_icgraph">
<area shape="rect" id="node3" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="136,5,216,33"/><area shape="rect" id="node5" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="264,5,314,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acadd9e503504342f43686c95c6ea9f44"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_cmd </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function executes a packet from the device. The return data is written into the file descriptor fd </p>

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00256">256</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="provider_8h_source.html#l00067">provider_t::cd</a>, <a class="el" href="fscmd_8c_source.html#l00076">chan_to_endpoint()</a>, <a class="el" href="provider_8h_source.html#l00055">provider_t::close</a>, <a class="el" href="provider_8c_source.html#l00050">ep</a>, <a class="el" href="errors_8h_source.html#l00063">ERROR_FAULT</a>, <a class="el" href="errors_8h_source.html#l00038">ERROR_OK</a>, <a class="el" href="errors_8h_source.html#l00039">ERROR_SCRATCHED</a>, <a class="el" href="fscmd_8c_source.html#l00088">free_chan()</a>, <a class="el" href="wireformat_8h_source.html#l00064">FS_ASSIGN</a>, <a class="el" href="wireformat_8h_source.html#l00063">FS_CHDIR</a>, <a class="el" href="wireformat_8h_source.html#l00060">FS_CLOSE</a>, <a class="el" href="wireformat_8h_source.html#l00057">FS_DELETE</a>, <a class="el" href="wireformat_8h_source.html#l00073">FS_EOF</a>, <a class="el" href="wireformat_8h_source.html#l00062">FS_MKDIR</a>, <a class="el" href="wireformat_8h_source.html#l00054">FS_OPEN_AP</a>, <a class="el" href="wireformat_8h_source.html#l00055">FS_OPEN_DR</a>, <a class="el" href="wireformat_8h_source.html#l00050">FS_OPEN_RD</a>, <a class="el" href="wireformat_8h_source.html#l00051">FS_OPEN_WR</a>, <a class="el" href="wireformat_8h_source.html#l00070">FS_READ</a>, <a class="el" href="wireformat_8h_source.html#l00056">FS_RENAME</a>, <a class="el" href="wireformat_8h_source.html#l00072">FS_REPLY</a>, <a class="el" href="wireformat_8h_source.html#l00061">FS_RMDIR</a>, <a class="el" href="wireformat_8h_source.html#l00048">FS_TERM</a>, <a class="el" href="wireformat_8h_source.html#l00071">FS_WRITE</a>, <a class="el" href="wireformat_8h_source.html#l00034">FSP_CMD</a>, <a class="el" href="wireformat_8h_source.html#l00037">FSP_DATA</a>, <a class="el" href="wireformat_8h_source.html#l00036">FSP_FD</a>, <a class="el" href="wireformat_8h_source.html#l00035">FSP_LEN</a>, <a class="el" href="log_8c_source.html#l00095">log_debug()</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, <a class="el" href="log_8h_source.html#l00040">log_rv</a>, <a class="el" href="log_8c_source.html#l00030">log_term()</a>, <a class="el" href="fscmd_8c_source.html#l00053">MAX_BUFFER_SIZE</a>, <a class="el" href="provider_8h_source.html#l00068">provider_t::mkdir</a>, <a class="el" href="provider_8h_source.html#l00058">provider_t::open_ap</a>, <a class="el" href="provider_8h_source.html#l00056">provider_t::open_rd</a>, <a class="el" href="provider_8h_source.html#l00057">provider_t::open_wr</a>, <a class="el" href="provider_8h_source.html#l00060">provider_t::opendir</a>, <a class="el" href="provider_8c_source.html#l00070">provider_assign()</a>, <a class="el" href="provider_8c_source.html#l00183">provider_lookup()</a>, <a class="el" href="provider_8h_source.html#l00073">_endpoint::ptype</a>, <a class="el" href="provider_8h_source.html#l00061">provider_t::readfile</a>, <a class="el" href="provider_8h_source.html#l00066">provider_t::rename</a>, <a class="el" href="provider_8h_source.html#l00069">provider_t::rmdir</a>, <a class="el" href="provider_8h_source.html#l00065">provider_t::scratch</a>, <a class="el" href="fscmd_8c_source.html#l00098">set_chan()</a>, and <a class="el" href="provider_8h_source.html#l00062">provider_t::writefile</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00191">cmd_loop()</a>.</p>
<div class="fragment"><div class="line">                                      {</div>
<div class="line">    <span class="keywordtype">int</span> tfd, cmd;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len;</div>
<div class="line">    <span class="keywordtype">char</span> retbuf[200];</div>
<div class="line">    <span class="keywordtype">int</span> rv;</div>
<div class="line"></div>
<div class="line">    cmd = buf[<a class="code" href="wireformat_8h.html#a2664d40614a37a48577a1e0d923baa23">FSP_CMD</a>];     <span class="comment">// 0</span></div>
<div class="line">    len = 255 &amp; buf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>];   <span class="comment">// 1</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (cmd == <a class="code" href="wireformat_8h.html#a0e6086242d13f3f885bf785f93ffe8b1">FS_TERM</a>) {</div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CMD_TERM</span></div>
<div class="line"><span class="preprocessor"></span>        {</div>
<div class="line">            <span class="keywordtype">int</span> n = buf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>];</div>
<div class="line">            <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;term: %d bytes @%p: &quot;</span>,n, buf);</div>
<div class="line">            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++) printf(<span class="stringliteral">&quot;%02x &quot;</span>,255&amp;buf[i]); printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        <span class="keywordflow">if</span> (len &gt; 200) {</div>
<div class="line">            <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;TERM length exceeds 200! Is %d\n&quot;</span>, len);</div>
<div class="line">            len = 200;</div>
<div class="line">        }</div>
<div class="line">        memcpy(retbuf, buf+3, len-3);</div>
<div class="line">        retbuf[len-3] = 0;</div>
<div class="line">        <a class="code" href="log_8c.html#a47a02a13f399183905b4a4512774f0be">log_term</a>(retbuf);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef DEBUG_CMD</span></div>
<div class="line"><span class="preprocessor"></span>    {</div>
<div class="line">        <span class="keywordtype">int</span> n = buf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>];</div>
<div class="line">        <a class="code" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7">log_debug</a>(<span class="stringliteral">&quot;cmd: %d bytes @%p: &quot;</span>,n, buf);</div>
<div class="line">        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;n;i++) printf(<span class="stringliteral">&quot;%02x &quot;</span>,255&amp;buf[i]); printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">    <span class="comment">// not on FS_TERM</span></div>
<div class="line">    tfd = buf[<a class="code" href="wireformat_8h.html#a2203fd082e7eab805485ec38eb577cc1">FSP_FD</a>];</div>
<div class="line">    <span class="keywordflow">if</span> (tfd &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Illegal file descriptor: %d\n&quot;</span>, tfd);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    buf[(<span class="keywordtype">unsigned</span> int)buf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>]] = 0;    <span class="comment">// 0-terminator</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="structprovider__t.html">provider_t</a> *prov = NULL; <span class="comment">//&amp;fs_provider;</span></div>
<div class="line">    <a class="code" href="struct__endpoint.html">endpoint_t</a> *<a class="code" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a> = NULL;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;got cmd=%d, fd=%d, name=%s&quot;</span>,cmd,tfd,</div>
<div class="line">            (cmd&lt;<a class="code" href="wireformat_8h.html#a4b959ab41e08c56670e1e3918fbf0e34">FS_ASSIGN</a>)?((<span class="keywordtype">char</span>*)buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>):<span class="stringliteral">&quot;null&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 3; i &lt; buf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>]; i++) printf(<span class="stringliteral">&quot; %02x&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)buf[i]);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    retbuf[<a class="code" href="wireformat_8h.html#a2664d40614a37a48577a1e0d923baa23">FSP_CMD</a>] = <a class="code" href="wireformat_8h.html#a54c7045bda7b963d296a3c5954954871">FS_REPLY</a>;</div>
<div class="line">    retbuf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>] = 4;</div>
<div class="line">    retbuf[<a class="code" href="wireformat_8h.html#a2203fd082e7eab805485ec38eb577cc1">FSP_FD</a>] = tfd;</div>
<div class="line">    retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a6caad37cbaf240efb8452547c5682b1a">ERROR_FAULT</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> eof = 0;</div>
<div class="line">    <span class="keywordtype">int</span> outdeleted = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span>(cmd) {</div>
<div class="line">        <span class="comment">// file-oriented commands</span></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a4f9bd5ed0ff3cd86af113a6fa3b3e953">FS_OPEN_WR</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            rv = prov-&gt;<a class="code" href="structprovider__t.html#acccdfa10c47956d110bc3ab8428ba0f3">open_wr</a>(ep, tfd, buf + <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 1);</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            <span class="keywordflow">if</span> (rv == 0) {</div>
<div class="line">                <a class="code" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834">set_chan</a>(tfd, ep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#ac276aef1b6489ff47ddda76bd9653102">FS_OPEN_DR</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            <span class="comment">// not all providers support directory operation</span></div>
<div class="line">            if (prov-&gt;opendir != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#ae612617137a69bc22481692d70f12eb0">opendir</a>(ep, tfd, buf + <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 1);</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">                <span class="keywordflow">if</span> (rv == 0) {</div>
<div class="line">                    <a class="code" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834">set_chan</a>(tfd, ep);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#af44b52313eddd3cd574a18101e22de9c">FS_OPEN_RD</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            rv = prov-&gt;<a class="code" href="structprovider__t.html#ac48fdb6c244f7755dfd2c0a89c6d09d1">open_rd</a>(ep, tfd, buf + <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 1);</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            <span class="keywordflow">if</span> (rv == 0) {</div>
<div class="line">                <a class="code" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834">set_chan</a>(tfd, ep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#ad8a2dfefc31fec8a82c96e7b33229c30">FS_OPEN_AP</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            rv = prov-&gt;<a class="code" href="structprovider__t.html#a85378f0f210cead8968edc3fa820c72c">open_ap</a>(ep, tfd, buf + <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 1);</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            <span class="keywordflow">if</span> (rv == 0) {</div>
<div class="line">                <a class="code" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834">set_chan</a>(tfd, ep);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#ad4076f58bb5ad9101461c47667521995">FS_READ</a>:</div>
<div class="line">        ep = <a class="code" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4">chan_to_endpoint</a>(tfd);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            eof = 0;    <span class="comment">// default just in case</span></div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            rv = prov-&gt;<a class="code" href="structprovider__t.html#ad6b0f5ed288e258eddc42973113bd7cd">readfile</a>(ep, tfd, retbuf + <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>, <a class="code" href="fscmd_8c.html#ad4d796b98c583d49e83adabd74a63bf6">MAX_BUFFER_SIZE</a>-<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>, &amp;eof);</div>
<div class="line">            <span class="comment">// TODO: handle error (rv&lt;0)</span></div>
<div class="line">            <span class="keywordflow">if</span> (rv &lt; 0) {</div>
<div class="line">                <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(-rv);</div>
<div class="line">            }</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>] = <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + rv;</div>
<div class="line">            <span class="keywordflow">if</span> (eof) {</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#a2664d40614a37a48577a1e0d923baa23">FSP_CMD</a>] = <a class="code" href="wireformat_8h.html#a02e7b232f5280b690d2c1ab5ae4871f9">FS_EOF</a>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#aef04baaf5affe32e8a65fc3f1c976b3b">FS_WRITE</a>:</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a02e7b232f5280b690d2c1ab5ae4871f9">FS_EOF</a>:</div>
<div class="line">        ep = <a class="code" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4">chan_to_endpoint</a>(tfd);</div>
<div class="line">        <span class="comment">//printf(&quot;WRITE: chan=%d, ep=%p\n&quot;, tfd, ep);</span></div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            rv = prov-&gt;<a class="code" href="structprovider__t.html#aa14cfab6d2a6e4033bc3ff4338eaef27">writefile</a>(ep, tfd, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>, len-<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>, cmd == <a class="code" href="wireformat_8h.html#a02e7b232f5280b690d2c1ab5ae4871f9">FS_EOF</a>);</div>
<div class="line">            <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">            }</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a89dca4787300ac6de70390b14f457d32">FS_CLOSE</a>:</div>
<div class="line">        ep = <a class="code" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4">chan_to_endpoint</a>(tfd);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            prov-&gt;<a class="code" href="structprovider__t.html#a14b27a7e8a950f790524ce95ba83a66c">close</a>(ep, tfd);</div>
<div class="line">            <a class="code" href="fscmd_8c.html#a4bf74fcccb28f36e76be0205105ac046">free_chan</a>(tfd);</div>
<div class="line">            retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629aadeb5032c03491611646c1c64f7c0e0c">ERROR_OK</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// command operations</span></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a5f8fac56f92ed68856428db21d684cb2">FS_DELETE</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            if (prov-&gt;scratch != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#afbc8d3e7800684225756fb20acdb8d5e">scratch</a>(ep, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>+1, &amp;outdeleted);</div>
<div class="line">                <span class="keywordflow">if</span> (rv == <a class="code" href="errors_8h.html#a8033c616a948b43efc809ee3233d7629a72a4e2b356d68b3a0b19437e6330349f">ERROR_SCRATCHED</a>) {</div>
<div class="line">                    retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 1] = outdeleted &gt; 99 ? 99 :outdeleted;</div>
<div class="line">                    retbuf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>] = <a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a> + 2;</div>
<div class="line">                } <span class="keywordflow">else</span> </div>
<div class="line">                <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a4b17371ca26c24bfe2c921d80ec3d0e6">FS_RENAME</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            if (prov-&gt;rename != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#a1932ae8107bebdd149807897cbcfe015">rename</a>(ep, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>+1);</div>
<div class="line">                <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a382b0d0ed81eaf3af3a3adb0a4067661">FS_CHDIR</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            if (prov-&gt;cd != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#a720c82a269d41ef9ffb54c50e362c007">cd</a>(ep, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>+1);</div>
<div class="line">                <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a0c86d814c22c4d3d3fa6f097a3e19531">FS_MKDIR</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            if (prov-&gt;mkdir != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#af660e74284bd17dfde703092c332d6a6">mkdir</a>(ep, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>+1);</div>
<div class="line">                <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a3a7a56377d20f2b53b18feb381dc1149">FS_RMDIR</a>:</div>
<div class="line">        ep = <a class="code" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63">provider_lookup</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>]);</div>
<div class="line">        <span class="keywordflow">if</span> (ep != NULL) {</div>
<div class="line">            prov = (<a class="code" href="structprovider__t.html">provider_t</a>*) ep-&gt;<a class="code" href="struct__endpoint.html#aa4eef8b47f1b3861963a7162185024bc">ptype</a>;</div>
<div class="line">            if (prov-&gt;rmdir != NULL) {</div>
<div class="line">                rv = prov-&gt;<a class="code" href="structprovider__t.html#af93d71d0e492f3c7224039ff5412f9af">rmdir</a>(ep, buf+<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>+1);</div>
<div class="line">                <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">                    <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">                }</div>
<div class="line">                retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="wireformat_8h.html#a4b959ab41e08c56670e1e3918fbf0e34">FS_ASSIGN</a>:</div>
<div class="line">        <span class="comment">// assign an endpoint number (i.e. a drive number for the PET)</span></div>
<div class="line">        <span class="comment">// to a filesystem provider and path</span></div>
<div class="line">        <span class="comment">// The drive number in buf[FSP_DATA] is the one to assign,</span></div>
<div class="line">        <span class="comment">// while the rest of the name determines which provider to use</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">// A provider can be determines relative to an existing one. In </span></div>
<div class="line">        <span class="comment">// this case the provider name is the endpoint (drive) number,</span></div>
<div class="line">        <span class="comment">// and the path is interpreted as relative to an existing endpoint.</span></div>
<div class="line">        <span class="comment">// If the provider name is a real name, the path is absolute.</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        rv = <a class="code" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d">provider_assign</a>(buf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>], buf+FSP_DATA+1);</div>
<div class="line">        <span class="keywordflow">if</span> (rv != 0) {</div>
<div class="line">            <a class="code" href="log_8h.html#a7ed9ed7aa2127676d030bdc03ec966a8">log_rv</a>(rv);</div>
<div class="line">        }</div>
<div class="line">        retbuf[<a class="code" href="wireformat_8h.html#aff88b8ff429b3dc62f5c8068e8024867">FSP_DATA</a>] = rv;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">int</span> e = write(fd, retbuf, 0xff &amp; retbuf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>]);</div>
<div class="line">    <span class="keywordflow">if</span> (e &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error on write: %d\n&quot;</span>, errno);</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#if defined DEBUG_WRITE || defined DEBUG_CMD</span></div>
<div class="line"><span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;write %02x %02x %02x:&quot;</span>, 255&amp;retbuf[0], 255&amp;retbuf[1],</div>
<div class="line">            255&amp;retbuf[2] );</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 3; i&lt;retbuf[<a class="code" href="wireformat_8h.html#a2432cc2e519a806b06784b097361bdb2">FSP_LEN</a>];i++) printf(<span class="stringliteral">&quot; %02x&quot;</span>, 255&amp;retbuf[i]);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_cgraph.png" border="0" usemap="#fscmd_8c_acadd9e503504342f43686c95c6ea9f44_cgraph" alt=""/></div>
<map name="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_cgraph" id="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_cgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#ac1bdc89cd482dffb2699bf75b00ec8d4" title="chan_to_endpoint" alt="" coords="123,5,250,33"/><area shape="rect" id="node7" href="fscmd_8c.html#a4bf74fcccb28f36e76be0205105ac046" title="free_chan" alt="" coords="146,211,227,239"/><area shape="rect" id="node9" href="log_8c.html#ab78e2de4bd6fc03706a48c3d01a285d7" title="log_debug" alt="" coords="316,75,399,103"/><area shape="rect" id="node11" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="320,289,395,317"/><area shape="rect" id="node13" href="log_8c.html#a47a02a13f399183905b4a4512774f0be" title="log_term" alt="" coords="150,367,223,395"/><area shape="rect" id="node15" href="provider_8c.html#ac09b19b96a84715ca81a06f743e3570d" title="provider_assign" alt="" coords="129,57,244,85"/><area shape="rect" id="node18" href="provider_8c.html#a928f4f1facce651a1e3a060e88e09a63" title="provider_lookup" alt="" coords="299,153,415,181"/><area shape="rect" id="node22" href="fscmd_8c.html#a7b21bf4d0a558a8ff9c39e2d7666d834" title="set_chan" alt="" coords="149,315,224,343"/><area shape="rect" id="node5" href="log_8c.html#a71ea2d6ec56d5620e986340d060702cd" title="log_info" alt="" coords="323,11,391,39"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_icgraph.png" border="0" usemap="#fscmd_8c_acadd9e503504342f43686c95c6ea9f44_icgraph" alt=""/></div>
<map name="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_icgraph" id="fscmd_8c_acadd9e503504342f43686c95c6ea9f44_icgraph">
<area shape="rect" id="node3" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="123,5,202,33"/><area shape="rect" id="node5" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="251,5,301,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4bf74fcccb28f36e76be0205105ac046"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_chan </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00088">88</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00062">chan_t::channo</a>, <a class="el" href="fscmd_8c_source.html#l00063">chan_t::ep</a>, and <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">       <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">               <span class="keywordflow">if</span> (<a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].channo == channo) {</div>
<div class="line">                       <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#af803c13b16ba71039de51fc48be901e9">channo</a> = -1;</div>
<div class="line">                       <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a> = NULL;</div>
<div class="line">               }</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a4bf74fcccb28f36e76be0205105ac046_icgraph.png" border="0" usemap="#fscmd_8c_a4bf74fcccb28f36e76be0205105ac046_icgraph" alt=""/></div>
<map name="fscmd_8c_a4bf74fcccb28f36e76be0205105ac046_icgraph" id="fscmd_8c_a4bf74fcccb28f36e76be0205105ac046_icgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="134,5,202,33"/><area shape="rect" id="node5" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="251,5,330,33"/><area shape="rect" id="node7" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="379,5,429,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b21bf4d0a558a8ff9c39e2d7666d834"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_chan </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>channo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="provider_8h.html#a0ac427ba6325c183990e25a3ff3ec7ee">endpoint_t</a> *&#160;</td>
          <td class="paramname"><em>ep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00098">98</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

<p>References <a class="el" href="fscmd_8c_source.html#l00062">chan_t::channo</a>, <a class="el" href="provider_8c_source.html#l00050">ep</a>, <a class="el" href="fscmd_8c_source.html#l00063">chan_t::ep</a>, <a class="el" href="log_8c_source.html#l00079">log_error()</a>, and <a class="el" href="provider_8h_source.html#l00042">MAX_NUMBER_OF_ENDPOINTS</a>.</p>

<p>Referenced by <a class="el" href="fscmd_8c_source.html#l00256">do_cmd()</a>.</p>
<div class="fragment"><div class="line">                                          {</div>
<div class="line">       <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>;i++) {</div>
<div class="line">               <span class="comment">// we overwrite existing entries, to &quot;heal&quot; leftover cruft</span></div>
<div class="line">               <span class="comment">// just in case...</span></div>
<div class="line">               <span class="keywordflow">if</span> ((<a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].channo == -1) || (<a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].channo == channo)) {</div>
<div class="line">                       <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#af803c13b16ba71039de51fc48be901e9">channo</a> = channo;</div>
<div class="line">                       <a class="code" href="fscmd_8c.html#aa55975c4bef9aa0329dfa07574565536">chantable</a>[i].<a class="code" href="structchan__t.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a> = <a class="code" href="provider_8c.html#ad001a35bcc827d3a580c8b5420f0d130">ep</a>;</div>
<div class="line">                       <span class="keywordflow">return</span>;</div>
<div class="line">               }</div>
<div class="line">        }</div>
<div class="line">       <a class="code" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8">log_error</a>(<span class="stringliteral">&quot;Did not find free ep slot for channel %d\n&quot;</span>, channo);</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_cgraph.png" border="0" usemap="#fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_cgraph" alt=""/></div>
<map name="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_cgraph" id="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_cgraph">
<area shape="rect" id="node3" href="log_8c.html#a2a4f55619b06be2dc2f756d17ffbebb8" title="log_error" alt="" coords="131,5,205,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_icgraph.png" border="0" usemap="#fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_icgraph" alt=""/></div>
<map name="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_icgraph" id="fscmd_8c_a7b21bf4d0a558a8ff9c39e2d7666d834_icgraph">
<area shape="rect" id="node3" href="fscmd_8c.html#acadd9e503504342f43686c95c6ea9f44" title="do_cmd" alt="" coords="131,5,200,33"/><area shape="rect" id="node5" href="fscmd_8h.html#aa3ba3f5aaa12874ea6c8399fb98223c9" title="cmd_loop" alt="" coords="248,5,328,33"/><area shape="rect" id="node7" href="fsio_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="376,5,426,33"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa55975c4bef9aa0329dfa07574565536"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structchan__t.html">chan_t</a> chantable[<a class="el" href="provider_8h.html#a84edb6c7cffffbef53ac210cb44e6b6f">MAX_NUMBER_OF_ENDPOINTS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="fscmd_8c_source.html#l00066">66</a> of file <a class="el" href="fscmd_8c_source.html">fscmd.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 4 2012 04:37:40 for XD2031 pcserver by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
