<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XD2031 firmware: serial.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">XD2031 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">serial.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="provider_8h_source.html">provider.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for serial.h:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h__incl.png" border="0" usemap="#serial_8h" alt=""/></div>
<map name="serial_8h" id="serial_8h">
<area shape="rect" id="node3" href="provider_8h.html" title="provider.h" alt="" coords="99,83,177,111"/><area shape="rect" id="node7" href="packet_8h.html" title="packet.h" alt="" coords="103,161,173,189"/><area shape="rect" id="node22" href="errormsg_8h.html" title="errormsg.h" alt="" coords="313,238,399,266"/><area shape="rect" id="node10" href="wireformat_8h.html" title="wireformat.h" alt="" coords="194,238,288,266"/><area shape="rect" id="node14" href="delay_8h.html" title="delay.h" alt="" coords="107,238,169,266"/><area shape="rect" id="node12" href="errors_8h.html" title="errors.h" alt="" coords="208,315,275,343"/><area shape="rect" id="node16" href="delayhw_8h.html" title="delayhw.h" alt="" coords="101,315,181,343"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h__dep__incl.png" border="0" usemap="#serial_8hdep" alt=""/></div>
<map name="serial_8hdep" id="serial_8hdep">
<area shape="rect" id="node3" href="channel_8c.html" title="channel.c" alt="" coords="5,83,83,111"/><area shape="rect" id="node5" href="file_8c.html" title="file.c" alt="" coords="108,83,156,111"/><area shape="rect" id="node7" href="main_8c.html" title="main.c" alt="" coords="180,83,240,111"/><area shape="rect" id="node9" href="serial_8c.html" title="serial.c" alt="" coords="266,83,328,111"/><area shape="rect" id="node11" href="term_8c.html" title="term.c" alt="" coords="353,83,411,111"/></map>
</div>
</div>
<p><a href="serial_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a62634036639f88eece6fbf226b45f84b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a62634036639f88eece6fbf226b45f84b">BAUD</a>&#160;&#160;&#160;115200</td></tr>
<tr class="separator:a62634036639f88eece6fbf226b45f84b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7081e02f83b04f6ef96aeb13ba52262d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a7081e02f83b04f6ef96aeb13ba52262d">serial_init</a> ()</td></tr>
<tr class="separator:a7081e02f83b04f6ef96aeb13ba52262d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ddf2fb0d23eab0aa1ccefa91149255"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#ab9ddf2fb0d23eab0aa1ccefa91149255">serial_sync</a> ()</td></tr>
<tr class="separator:ab9ddf2fb0d23eab0aa1ccefa91149255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94547a891c369354cec16547930de449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a94547a891c369354cec16547930de449">serial_flush</a> ()</td></tr>
<tr class="separator:a94547a891c369354cec16547930de449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a467023822de9459179b4c9a13da0d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#a2a467023822de9459179b4c9a13da0d1">serial_delay</a> ()</td></tr>
<tr class="separator:a2a467023822de9459179b4c9a13da0d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af07f8902149a4e7ca73a4586578457c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structprovider__t.html">provider_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="serial_8h.html#af07f8902149a4e7ca73a4586578457c5">serial_provider</a></td></tr>
<tr class="separator:af07f8902149a4e7ca73a4586578457c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a62634036639f88eece6fbf226b45f84b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUD&#160;&#160;&#160;115200</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>high level serial line driver - adapting the packets to send and receive to the hardware-specific uart drivers </p>

<p>Definition at line <a class="el" href="serial_8h_source.html#l00039">39</a> of file <a class="el" href="serial_8h_source.html">serial.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2a467023822de9459179b4c9a13da0d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_delay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>send/receive data while waiting for some delay </p>

<p>Definition at line <a class="el" href="serial_8c_source.html#l00453">453</a> of file <a class="el" href="serial_8c_source.html">serial.c</a>.</p>

<p>References <a class="el" href="serial_8c_source.html#l00377">push_data_to_packet()</a>, <a class="el" href="serial_8c_source.html#l00356">send()</a>, and <a class="el" href="uarthw_8c_source.html#l00094">uarthw_receive()</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">    <span class="comment">// can we receive?</span></div>
<div class="line">    int16_t data = <a class="code" href="uarthw_8c.html#a94e8c918ce79dc5b09064e8776770956">uarthw_receive</a>();</div>
<div class="line">    <span class="keywordflow">while</span> (data &gt;= 0) {</div>
<div class="line">        <a class="code" href="serial_8c.html#ab3258ff091e5e10fc76b30cd24e55596">push_data_to_packet</a>(0xff &amp; data);</div>
<div class="line">        <span class="comment">// try next byte</span></div>
<div class="line">        data = <a class="code" href="uarthw_8c.html#a94e8c918ce79dc5b09064e8776770956">uarthw_receive</a>();</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// try to send</span></div>
<div class="line">    <a class="code" href="serial_8c.html#a6aaf52ad0a4ad585de528c2f40af36e3">send</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_a2a467023822de9459179b4c9a13da0d1_cgraph.png" border="0" usemap="#serial_8h_a2a467023822de9459179b4c9a13da0d1_cgraph" alt=""/></div>
<map name="serial_8h_a2a467023822de9459179b4c9a13da0d1_cgraph" id="serial_8h_a2a467023822de9459179b4c9a13da0d1_cgraph">
<area shape="rect" id="node3" href="serial_8c.html#ab3258ff091e5e10fc76b30cd24e55596" title="push_data_to_packet" alt="" coords="147,121,296,149"/><area shape="rect" id="node9" href="serial_8c.html#a6aaf52ad0a4ad585de528c2f40af36e3" title="send" alt="" coords="384,211,434,239"/><area shape="rect" id="node34" href="uarthw_8c.html#a94e8c918ce79dc5b09064e8776770956" title="uarthw_receive" alt="" coords="165,238,277,266"/><area shape="rect" id="node5" href="packet_8h.html#af0ae4da4d34d8dab4f17f5d9a8e57436" title="packet_set_write" alt="" coords="349,159,470,187"/><area shape="rect" id="node7" href="packet_8h.html#a16bdf2f8eaed2ccf4712247bc5866e7f" title="packet_write_char" alt="" coords="345,5,474,33"/><area shape="rect" id="node25" href="uarthw_8c.html#a9a446e9813b93bc7782622d598df287d" title="uarthw_can_send" alt="" coords="541,57,667,85"/><area shape="rect" id="node27" href="uarthw_8c.html#acb0e0d143a12e48dbb13b23ac1c8515c" title="uarthw_send" alt="" coords="555,109,653,137"/><area shape="rect" id="node11" href="serial_8c.html#ab9126462beb6d6cfba1d6b5941557207" title="advance_slots" alt="" coords="551,211,657,239"/><area shape="rect" id="node13" href="serial_8c.html#ada6018e05fbcd807dce52864af635d12" title="read_char_from_packet" alt="" coords="523,263,685,291"/><area shape="rect" id="node15" href="packet_8h.html#a34b76089cf01a140b9d44bb17337ba5d" title="packet_get_chan" alt="" coords="751,263,873,291"/><area shape="rect" id="node17" href="packet_8h.html#a89d861cedccb4c116bca4686f5300b03" title="packet_get_contentlen" alt="" coords="734,315,890,343"/><area shape="rect" id="node19" href="packet_8h.html#abd38157c9a5066d33eb199105dc57c0f" title="packet_get_type" alt="" coords="752,367,872,395"/><area shape="rect" id="node21" href="packet_8h.html#addb176aaaeddd33017a9c51693dc4510" title="packet_has_data" alt="" coords="751,159,873,187"/><area shape="rect" id="node23" href="packet_8h.html#a82b582cda143f4b419e8ab621a1d7142" title="packet_read_char" alt="" coords="748,211,876,239"/><area shape="rect" id="node29" href="uarthw_8c.html#a16407b10e85b038a6ea51bfb8c31ad56" title="_uart_enable_sendisr" alt="" coords="737,107,887,135"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a94547a891c369354cec16547930de449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>flush the data out the UART </p>

<p>Definition at line <a class="el" href="serial_8c_source.html#l00469">469</a> of file <a class="el" href="serial_8c_source.html">serial.c</a>.</p>

<p>References <a class="el" href="serial_8c_source.html#l00453">serial_delay()</a>.</p>

<p>Referenced by <a class="el" href="term_8c_source.html#l00057">term_flush()</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="serial_8c.html#aa059c7f18fb4caf7aa2e187d71baf311">slots_used</a> &gt; 0) {</div>
<div class="line">        <a class="code" href="delay_8h.html#a2a467023822de9459179b4c9a13da0d1">serial_delay</a>();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_a94547a891c369354cec16547930de449_cgraph.png" border="0" usemap="#serial_8h_a94547a891c369354cec16547930de449_cgraph" alt=""/></div>
<map name="serial_8h_a94547a891c369354cec16547930de449_cgraph" id="serial_8h_a94547a891c369354cec16547930de449_cgraph">
<area shape="rect" id="node3" href="delay_8h.html#a2a467023822de9459179b4c9a13da0d1" title="serial_delay" alt="" coords="144,5,237,33"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_a94547a891c369354cec16547930de449_icgraph.png" border="0" usemap="#serial_8h_a94547a891c369354cec16547930de449_icgraph" alt=""/></div>
<map name="serial_8h_a94547a891c369354cec16547930de449_icgraph" id="serial_8h_a94547a891c369354cec16547930de449_icgraph">
<area shape="rect" id="node3" href="term_8h.html#af0742bbf17e400753f1d6551580934ef" title="term_flush" alt="" coords="145,138,228,166"/><area shape="rect" id="node5" href="debug_8h.html#af964f239c289f93b082b6bb75f884fa2" title="debug_putcrlf" alt="" coords="278,138,380,166"/><area shape="rect" id="node7" href="cmd2_8h.html#abaf24aaeaa145dec95026ae71251be71" title="command_execute" alt="" coords="613,86,747,114"/><area shape="rect" id="node13" href="ieee_8h.html#a47341f8a6f71378581fb6a67ece35ed2" title="ieee_mainloop_iteration" alt="" coords="1091,189,1253,217"/><area shape="rect" id="node17" href="serial_8c.html#a723b54d8d0110a7475aee8bc4f99771f" title="directory_converter" alt="" coords="430,292,565,320"/><area shape="rect" id="node19" href="file_8h.html#a2dac9b9090b14532b84f96929c3cb2cc" title="file_open" alt="" coords="642,34,718,62"/><area shape="rect" id="node22" href="file_8h.html#a8336bd2f1ed40fc3520412402061d43b" title="file_submit_call" alt="" coords="441,86,554,114"/><area shape="rect" id="node27" href="name_8h.html#a0e25b9dc05d9d0c2b58510892dacd5eb" title="parse_filename" alt="" coords="441,34,554,62"/><area shape="rect" id="node31" href="pet_s_d_2ieeehw_8c.html#a96773c4d0d22be83b1b84de6cb6ff52d" title="set_atn_irq" alt="" coords="636,241,724,269"/><area shape="rect" id="node9" href="bus_8c.html#a68ec77741c71e9f01f346016e85f3e7b" title="cmd_handler" alt="" coords="795,86,893,114"/><area shape="rect" id="node11" href="bus_8h.html#ac5b8727fd6b9e6bdaf98977f90832dcc" title="bus_attention" alt="" coords="941,112,1043,140"/><area shape="rect" id="node15" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title="main" alt="" coords="1302,216,1352,244"/><area shape="rect" id="node33" href="xs1541_2ieeehw_8h.html#a2a60f36b918244a1755bf23d56fee284" title="ieeehw_init" alt="" coords="800,241,888,269"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7081e02f83b04f6ef96aeb13ba52262d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a>* serial_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initialize the UART </p>

<p>Definition at line <a class="el" href="serial_8c_source.html#l00555">555</a> of file <a class="el" href="serial_8c_source.html">serial.c</a>.</p>

<p>References <a class="el" href="serial_8c_source.html#l00099">NUMBER_OF_SLOTS</a>, <a class="el" href="serial_8c.html#a60aa9126f8c6113641042eeccf231bd8">rx_channels</a>, <a class="el" href="serial_8c_source.html#l00122">RX_IDLE</a>, <a class="el" href="serial_8c_source.html#l00090">serial_provider</a>, and <a class="el" href="serial_8c_source.html#l00112">TX_IDLE</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00082">main()</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">    <a class="code" href="serial_8c.html#aa059c7f18fb4caf7aa2e187d71baf311">slots_used</a> = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (int8_t i = <a class="code" href="serial_8c.html#acb4b7b3034709a082b08fadd8f2bcfea">NUMBER_OF_SLOTS</a>-1; i &gt;= 0; i--) {</div>
<div class="line">        <a class="code" href="serial_8c.html#a60aa9126f8c6113641042eeccf231bd8">rx_channels</a>[i].channelno = -1;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="serial_8c.html#a121d79bdb3f9705ff8e0a6c368094a5b">rxstate</a> = <a class="code" href="serial_8c.html#ae8dbeb081056c2044a8622100b20f4c5">RX_IDLE</a>;</div>
<div class="line">    <a class="code" href="serial_8c.html#a417e32f683a22f22699d87c214ef9bfb">txstate</a> = <a class="code" href="serial_8c.html#a8466586b863fc4b1722eda703698d847">TX_IDLE</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// we should not register (at least for now, as when we are being</span></div>
<div class="line">    <span class="comment">// selected, the remote end does not know about it currently, as we</span></div>
<div class="line">    <span class="comment">// do not notify it. So open requests will be returned with an error</span></div>
<div class="line">    <span class="comment">//provider_register(&quot;FS&quot;, &amp;serial_provider);</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> &amp;<a class="code" href="serial_8c.html#af07f8902149a4e7ca73a4586578457c5">serial_provider</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_a7081e02f83b04f6ef96aeb13ba52262d_icgraph.png" border="0" usemap="#serial_8h_a7081e02f83b04f6ef96aeb13ba52262d_icgraph" alt=""/></div>
<map name="serial_8h_a7081e02f83b04f6ef96aeb13ba52262d_icgraph" id="serial_8h_a7081e02f83b04f6ef96aeb13ba52262d_icgraph">
<area shape="rect" id="node3" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title="main" alt="" coords="131,5,181,33"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9ddf2fb0d23eab0aa1ccefa91149255"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void serial_sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sync with the server </p>

<p>Definition at line <a class="el" href="serial_8c_source.html#l00576">576</a> of file <a class="el" href="serial_8c_source.html">serial.c</a>.</p>

<p>References <a class="el" href="wireformat_8h_source.html#l00046">FS_SYNC</a>, <a class="el" href="uarthw_8c_source.html#l00075">uarthw_can_send()</a>, and <a class="el" href="uarthw_8c_source.html#l00084">uarthw_send()</a>.</p>

<p>Referenced by <a class="el" href="main_8c_source.html#l00082">main()</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// sync with the pc server</span></div>
<div class="line">    <span class="comment">// by sending 128 FS_SYNC bytes</span></div>
<div class="line">    <span class="keywordflow">for</span> (uint8_t cnt = 128; cnt &gt; 0; cnt--) {</div>
<div class="line">        <span class="keywordflow">while</span> (!<a class="code" href="uarthw_8c.html#a9a446e9813b93bc7782622d598df287d">uarthw_can_send</a>());</div>
<div class="line">        <a class="code" href="uarthw_8c.html#acb0e0d143a12e48dbb13b23ac1c8515c">uarthw_send</a>(<a class="code" href="wireformat_8h.html#a0e1740f8851fca2f213c033d385f4667">FS_SYNC</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_cgraph.png" border="0" usemap="#serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_cgraph" alt=""/></div>
<map name="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_cgraph" id="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_cgraph">
<area shape="rect" id="node3" href="uarthw_8c.html#a9a446e9813b93bc7782622d598df287d" title="uarthw_can_send" alt="" coords="142,5,269,33"/><area shape="rect" id="node5" href="uarthw_8c.html#acb0e0d143a12e48dbb13b23ac1c8515c" title="uarthw_send" alt="" coords="156,57,254,85"/><area shape="rect" id="node7" href="uarthw_8c.html#a16407b10e85b038a6ea51bfb8c31ad56" title="_uart_enable_sendisr" alt="" coords="317,57,467,85"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_icgraph.png" border="0" usemap="#serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_icgraph" alt=""/></div>
<map name="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_icgraph" id="serial_8h_ab9ddf2fb0d23eab0aa1ccefa91149255_icgraph">
<area shape="rect" id="node3" href="main_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title="main" alt="" coords="142,5,192,33"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af07f8902149a4e7ca73a4586578457c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structprovider__t.html">provider_t</a> serial_provider</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>submit the contents of a buffer to the UART If buffer slot is available, return immediately. Otherwise wait until slot is available</p>
<p>Note: submitter must check buf_is_empty() for true or buf_wait_free() before reuse or freeing the memory! </p>

<p>Definition at line <a class="el" href="serial_8c_source.html#l00090">90</a> of file <a class="el" href="serial_8c_source.html">serial.c</a>.</p>

<p>Referenced by <a class="el" href="serial_8c_source.html#l00555">serial_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 4 2012 04:34:52 for XD2031 firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
