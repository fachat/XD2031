
# test script to test basic communication between 
# test runner and firmware

message READ error channel message

message open FTP file for reading
atn .listen 8 f0
send "$FTP:WWW.ZIMMERS.NET/PUB/CBM/PET/00index" 0d
atn .unlisten


atn .talk 8 .secondary f
recv "00, OK,00,00" 0d
atn .untalk

atn .talk 8 .secondary 0
expect 01 04 01 01 FE 00 12 22  70 75 62 2F 63 62 6D 2F
expect 70 65 74 20 20 20 20 20  22 58 44 32 30 33 31 00
expect 01 01 00 00 20 20 20 22  61 72 63 68 69 76 65 72

#]]Rx Eof: 0000  01 04 01 01 FE 00 12 22  70 75 62 2F 63 62 6D 2F  |       "pub/cbm/|
#]]        0010  70 65 74 20 20 20 20 20  22 58 44 32 30 33 31 00  |pet     "XD2031 | 
#]]        0020  01 01 00 00 20 20 20 22  61 72 63 68 69 76 65 72  |       "archiver| 
#]]        0030  73 22 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |s"        PRG   |                     
#]]        0040  01 01 00 00 20 20 20 22  65 64 75 22 20 20 20 20  |       "edu"    |                     
#]]        0050  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0060  01 01 00 00 20 20 20 22  30 30 49 4E 44 45 58 22  |       "00INDEX"|                     
#]]        0070  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0080  01 01 00 00 20 20 20 22  67 61 6D 65 73 22 20 20  |       "games"  |                     
#]]        0090  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        00A0  01 01 00 00 20 20 20 22  41 4C 4C 46 49 4C 45 53  |       "ALLFILES|                     
#]]        00B0  22 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |"         PRG   |                     
#]]        00C0  01 01 00 00 20 20 20 22  75 74 69 6C 69 74 69 65  |       "utilitie|                     
#]]        00D0  73 22 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |s"        PRG   |                     
#]]        00E0  01 01 00 00 20 20 20 22  69 6E 64 65 78 2E 68 74  |       "index.ht|                     
#]]        00F0  6D 6C 22 20 20 20 20 20  20 20 53 45 51 20 20 00  |ml"       SEQ   |                     
#]]        0100  01 01 00 00 20 20 20 22  66 69 72 6D 77 61 72 65  |       "firmware|                     
#]]        0110  22 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |"         PRG   |                     
#]]        0120  01 01 00 00 20 20 20 22  75 6E 73 6F 72 74 65 64  |       "unsorted|                     
#]]        0130  22 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |"         PRG   |                     
#]]        0140  01 01 00 00 20 20 20 22  73 63 68 65 6D 61 74 69  |       "schemati|                     
#]]        0150  63 73 22 20 20 20 20 20  20 20 50 52 47 20 20 00  |cs"       PRG   |                     
#]]        0160  01 01 00 00 20 20 20 22  73 72 63 22 20 20 20 20  |       "src"    |                     
#]]        0170  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0180  01 01 00 00 20 20 20 22  61 75 64 69 6F 22 20 20  |       "audio"  |                     
#]]        0190  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        01A0  01 01 00 00 20 20 20 22  64 65 6D 6F 64 69 73 6B  |       "demodisk|                     
#]]        01B0  73 22 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |s"        PRG   |                     
#]]        01C0  01 01 00 00 20 20 20 22  41 4C 4C 46 49 4C 45 53  |       "ALLFILES|                     
#]]        01D0  2E 68 74 6D 6C 22 20 20  20 20 53 45 51 20 20 00  |.html"    SEQ   |                     
#]]        01E0  01 01 00 00 20 20 20 22  68 74 6D 6C 22 20 20 20  |       "html"   |                     
#]]        01F0  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0200  01 01 00 00 20 20 20 22  6D 61 6E 75 61 6C 73 22  |       "manuals"|                     
#]]        0210  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0220  01 01 00 00 20 20 20 22  70 72 6F 67 72 61 6D 6D  |       "programm|                     
#]]        0230  69 6E 67 22 20 20 20 20  20 20 50 52 47 20 20 00  |ing"      PRG   |                     
#]]        0240  01 01 00 00 20 20 20 22  64 65 6D 6F 73 22 20 20  |       "demos"  |                     
#]]        0250  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        0260  01 01 00 00 20 20 20 22  53 75 70 65 72 50 45 54  |       "SuperPET|                     
#]]        0270  22 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |"         PRG   |                     
#]]        0280  01 01 00 00 20 20 20 22  6F 73 22 20 20 20 20 20  |       "os"     |                     
#]]        0290  20 20 20 20 20 20 20 20  20 20 50 52 47 20 20 00  |          PRG   |                     
#]]        02A0  01 01 00 00 42 4C 4F 43  4B 53 20 46 52 45 45 2E  |    BLOCKS FREE.|                     
#]]        02B0  20 20 20 20 20 20 20 20  20 20 20 20 20 00 00 00  |                |                     
#recv .ignore 1000
atn .untalk

message close TCP file
atn .listen 8 e0
atn .unlisten
